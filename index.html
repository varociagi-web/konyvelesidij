<!DOCTYPE html>
<html lang="hu">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SukorAD√ì ‚Äì K√∂nyvel√©si D√≠j Kalkul√°tor</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=DM+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #f5f4f2;
    --surface: #ffffff;
    --surface2: #f0eeeb;
    --border: #e0dbd4;
    --accent: #c8782a;
    --accent-light: #e8954a;
    --gold: #c8782a;
    --text: #2d2a26;
    --text-muted: #7a7268;
    --text-dim: #b0a89e;
    --green: #3a8a52;
    --red: #c0392b;
    --radius: 10px;
  }

  * { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    background: var(--bg);
    color: var(--text);
    font-family: 'DM Sans', sans-serif;
    font-weight: 400;
    min-height: 100vh;
    line-height: 1.6;
  }

  /* Header */
  header {
    border-bottom: 1px solid var(--border);
    padding: 28px 40px;
    display: flex;
    align-items: center;
    gap: 20px;
    background: var(--surface);
    box-shadow: 0 1px 4px rgba(0,0,0,0.06);
  }

  .logo-mark {
    width: 44px; height: 44px;
    background: var(--accent);
    border-radius: 8px;
    display: flex; align-items: center; justify-content: center;
    font-family: 'Playfair Display', serif;
    font-weight: 700;
    font-size: 18px;
    color: white;
    flex-shrink: 0;
    letter-spacing: -1px;
  }

  .header-text h1 {
    font-family: 'Playfair Display', serif;
    font-size: 20px;
    font-weight: 600;
    letter-spacing: 0.5px;
    color: var(--text);
  }
  .header-text p {
    font-size: 12px;
    color: var(--text-muted);
    letter-spacing: 1.5px;
    text-transform: uppercase;
  }

  .container {
    max-width: 960px;
    margin: 0 auto;
    padding: 40px 24px 80px;
  }

  /* Tabs */
  .tabs {
    display: flex;
    gap: 4px;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 6px;
    margin-bottom: 36px;
    box-shadow: 0 1px 3px rgba(0,0,0,0.05);
  }

  .tab-btn {
    flex: 1;
    padding: 12px 16px;
    background: transparent;
    border: none;
    border-radius: 8px;
    color: var(--text-muted);
    font-family: 'DM Sans', sans-serif;
    font-size: 14px;
    font-weight: 400;
    cursor: pointer;
    transition: all 0.2s;
    letter-spacing: 0.3px;
  }

  .tab-btn.active {
    background: var(--accent);
    color: white;
    font-weight: 500;
  }

  .tab-btn:not(.active):hover {
    background: var(--surface2);
    color: var(--text);
  }

  /* Section */
  .section {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    margin-bottom: 16px;
    overflow: hidden;
    box-shadow: 0 1px 3px rgba(0,0,0,0.04);
  }

  .section.section-ked {
    border-color: #5a9e6e;
    box-shadow: 0 0 0 1px #5a9e6e, 0 2px 8px rgba(90,158,110,0.10);
    background: #f7fdf9;
  }

  .section.section-ked .section-header {
    background: #e6f5ec;
    border-bottom-color: #c2e0cc;
  }

  .section.section-ked .section-num {
    background: #5a9e6e;
  }

  .section.section-ked .section-title {
    color: #2e6b44;
  }

  .section-header {
    padding: 18px 24px;
    display: flex;
    align-items: center;
    gap: 12px;
    border-bottom: 1px solid var(--border);
    background: #faf9f7;
  }

  .section-num {
    width: 26px; height: 26px;
    border-radius: 50%;
    background: var(--accent);
    color: white;
    font-size: 12px;
    font-weight: 600;
    display: flex; align-items: center; justify-content: center;
    flex-shrink: 0;
  }

  .section-title {
    font-family: 'Playfair Display', serif;
    font-size: 16px;
    font-weight: 600;
    color: var(--text);
  }

  .section-body {
    padding: 24px;
  }

  /* Form elements */
  .field {
    margin-bottom: 20px;
  }

  .field:last-child { margin-bottom: 0; }

  label {
    display: block;
    font-size: 13px;
    color: var(--text-muted);
    margin-bottom: 8px;
    letter-spacing: 0.5px;
  }

  select, input[type="number"], input[type="text"] {
    width: 100%;
    padding: 11px 14px;
    background: var(--bg);
    border: 1px solid var(--border);
    border-radius: 7px;
    color: var(--text);
    font-family: 'DM Sans', sans-serif;
    font-size: 14px;
    transition: border-color 0.2s;
    appearance: none;
    -webkit-appearance: none;
  }

  select {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='8' viewBox='0 0 12 8'%3E%3Cpath d='M1 1l5 5 5-5' stroke='%237a7268' stroke-width='1.5' fill='none' stroke-linecap='round'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 14px center;
    padding-right: 36px;
    background-color: var(--bg);
  }

  select:focus, input:focus {
    outline: none;
    border-color: var(--accent);
    box-shadow: 0 0 0 3px rgba(200,120,42,0.12);
  }

  select option { background: #ffffff; color: var(--text); }

  .two-col {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
  }

  .three-col {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    gap: 16px;
  }

  /* Checkbox / toggle rows */
  .check-row {
    display: grid;
    grid-template-columns: 1fr 140px 52px;
    align-items: center;
    padding: 10px 0;
    border-bottom: 1px solid var(--border);
    gap: 0;
  }

  .check-row:last-child { border-bottom: none; }

  .check-label {
    font-size: 13px;
    color: var(--text);
  }

  .check-sub {
    font-size: 11px;
    color: var(--text-muted);
    margin-top: 2px;
  }

  .check-price {
    font-size: 13px;
    color: var(--accent);
    white-space: nowrap;
    text-align: right;
    padding-right: 12px;
  }

  /* toggle √©s inline-num mindig a harmadik oszlopban, jobbra igaz√≠tva */
  .check-row > label.toggle,
  .check-row > .inline-num,
  .check-row > div[style*="width:40px"] {
    justify-self: end;
  }

  .toggle {
    position: relative;
    width: 40px; height: 22px;
    flex-shrink: 0;
    display: block;
  }

  .toggle input { opacity: 0; width: 0; height: 0; }

  .toggle-slider {
    position: absolute;
    inset: 0;
    background: #ddd8d0;
    border: 1px solid var(--border);
    border-radius: 11px;
    cursor: pointer;
    transition: 0.2s;
  }

  .toggle-slider:before {
    content: '';
    position: absolute;
    width: 16px; height: 16px;
    left: 2px; top: 2px;
    background: white;
    border-radius: 50%;
    transition: 0.2s;
    box-shadow: 0 1px 3px rgba(0,0,0,0.2);
  }

  .toggle input:checked + .toggle-slider {
    background: var(--accent);
    border-color: var(--accent);
  }

  .toggle input:checked + .toggle-slider:before {
    transform: translateX(18px);
    background: white;
  }

  /* Small number input inline */
  .inline-num {
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .inline-num input {
    width: 70px;
    text-align: center;
    padding: 8px 10px;
  }

  /* Result panel */
  .result-panel {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    overflow: hidden;
    position: sticky;
    top: 20px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.07);
  }

  .result-header {
    padding: 20px 24px 16px;
    border-bottom: 1px solid var(--border);
    background: #faf7f4;
  }

  .result-title {
    font-family: 'Playfair Display', serif;
    font-size: 15px;
    color: var(--text);
    margin-bottom: 4px;
  }

  .result-subtitle {
    font-size: 11px;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 1px;
  }

  .result-body { padding: 20px 24px; }

  .result-line {
    display: flex;
    justify-content: space-between;
    align-items: baseline;
    padding: 7px 0;
    font-size: 13px;
    border-bottom: 1px solid var(--border);
  }

  .result-line:last-of-type { border-bottom: none; }

  .result-sub {
    font-size: 11px;
    color: var(--text-dim);
    margin-top: 1px;
  }

  .ked-box {
    margin-top: 4px;
    margin-bottom: 4px;
    background: #f0faf4;
    border: 1.5px solid #5a9e6e;
    border-radius: 8px;
    overflow: hidden;
  }

  .ked-box-header {
    background: #e6f5ec;
    padding: 7px 14px;
    font-size: 10px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 1.2px;
    color: #3a7a52;
    border-bottom: 1px solid #c2e0cc;
  }

  .ked-box-body {
    padding: 2px 14px 6px;
  }

  .ked-box .result-line {
    border-bottom-color: #d0ead9;
  }

  .ked-box .result-line .lbl { color: #4a7a5a; font-size: 12px; }
  .ked-box .result-line .val { color: #2e6b44; font-weight: 600; }

  .ked-box-total {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 14px;
    border-top: 1.5px solid #5a9e6e;
    background: #e6f5ec;
    font-weight: 700;
    font-size: 13px;
  }
  .ked-box-total .lbl { color: #2e6b44; }
  .ked-box-total .val { color: #2e6b44; }

  /* √Åth√∫zott + kedvezm√©nyes √°r egym√°s mellett */
  .subtotal-ked {
    display: flex;
    justify-content: space-between;
    align-items: baseline;
    padding: 9px 0;
    font-size: 13px;
    border-bottom: 1px solid var(--border);
    border-top: 1px solid var(--border);
    margin-top: 4px;
  }
  .subtotal-ked .lbl { color: var(--text-muted); font-weight: 500; }
  .subtotal-ked .vals { display: flex; align-items: baseline; gap: 8px; }
  .subtotal-ked .val-orig {
    color: var(--text-dim);
    text-decoration: line-through;
    font-size: 12px;
  }
  .subtotal-ked .val-arrow {
    color: #5a9e6e;
    font-size: 12px;
    font-weight: 600;
  }
  .subtotal-ked .val-new {
    color: var(--accent);
    font-weight: 700;
    font-size: 15px;
  }

  .result-section-label {
    font-size: 10px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 1.2px;
    color: var(--accent);
    padding: 10px 0 4px;
    border-bottom: 1px solid var(--border);
    margin-bottom: 0;
  }

  .result-line .lbl { color: var(--text-muted); }
  .result-line .val { color: var(--text); font-weight: 500; }
  .result-line.discount .val { color: var(--green); }
  .result-line.subtotal .val { color: var(--accent); font-weight: 600; }

  .result-total {
    margin-top: 16px;
    padding: 18px 20px;
    background: #fdf5ee;
    border-radius: 8px;
    border: 1px solid rgba(200,120,42,0.2);
  }

  .total-label {
    font-size: 11px;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 1.5px;
    margin-bottom: 6px;
  }

  .total-net {
    font-family: 'Playfair Display', serif;
    font-size: 28px;
    color: var(--accent);
    font-weight: 600;
  }

  .total-gross {
    font-size: 13px;
    color: var(--text-muted);
    margin-top: 4px;
  }

  .total-gross span {
    color: var(--text);
    font-weight: 600;
  }

  .note-box {
    margin-top: 16px;
    padding: 12px 16px;
    background: #fdf5ee;
    border: 1px solid rgba(200,120,42,0.2);
    border-radius: 7px;
    font-size: 12px;
    color: var(--text-muted);
    line-height: 1.5;
  }

  .eves-zar-box {
    margin-top: 16px;
    padding: 14px 16px;
    background: #fffbf2;
    border: 1.5px solid #e6a830;
    border-radius: 8px;
    display: flex;
    align-items: flex-start;
    gap: 12px;
  }
  .eves-zar-icon {
    font-size: 20px;
    flex-shrink: 0;
    line-height: 1;
    margin-top: 1px;
  }
  .eves-zar-body { flex: 1; }
  .eves-zar-title {
    font-size: 11px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 1px;
    color: #b07a10;
    margin-bottom: 4px;
  }
  .eves-zar-text {
    font-size: 12px;
    color: var(--text-muted);
    line-height: 1.5;
  }
  .eves-zar-amount {
    font-size: 14px;
    font-weight: 700;
    color: #b07a10;
    margin-top: 4px;
  }

  /* Layout */
  .layout {
    display: grid;
    grid-template-columns: 1fr 320px;
    gap: 24px;
    align-items: start;
  }

  /* Info badge */
  .info-badge {
    display: inline-block;
    background: rgba(200,120,42,0.1);
    border: 1px solid rgba(200,120,42,0.25);
    color: var(--accent);
    font-size: 11px;
    padding: 3px 10px;
    border-radius: 20px;
    margin-left: 8px;
    vertical-align: middle;
  }

  /* Hidden panel */
  .tab-panel { display: none; }
  .tab-panel.active { display: block; }

  .egyedi-ked-block {
    margin-top: 4px;
    padding: 14px 16px;
    background: #fdf5ee;
    border: 1px dashed rgba(200,120,42,0.3);
    border-radius: 8px;
  }

  /* Webshop specifics */
  .felarak-grid {
    display: grid;
    gap: 0;
  }

  /* Divider */
  .divider {
    height: 1px;
    background: var(--border);
    margin: 20px 0;
  }

  .hint {
    font-size: 12px;
    color: var(--text-dim);
    margin-top: 6px;
  }

  .ws-type-btn {
    padding: 8px 16px;
    background: transparent;
    border: none;
    border-radius: 6px;
    color: var(--text-muted);
    font-family: 'DM Sans', sans-serif;
    font-size: 13px;
    cursor: pointer;
    transition: all 0.2s;
  }
  .ws-type-btn.active {
    background: var(--accent);
    color: white;
  }
  .ws-type-btn:not(.active):hover {
    color: var(--text);
    background: var(--surface2);
  }

  /* ===== MOBILE ===== */
  @media (max-width: 700px) {

    /* Header */
    header { padding: 14px 16px; gap: 12px; }
    .logo-mark { width: 36px; height: 36px; font-size: 15px; }
    .header-text h1 { font-size: 17px; }
    .header-text p { font-size: 11px; }

    /* Container */
    .container { padding: 16px 12px 80px; }

    /* Tabs ‚Äì v√≠zszintes scroll, ne t√∂rj√∂n */
    .tabs {
      flex-direction: row;
      overflow-x: auto;
      -webkit-overflow-scrolling: touch;
      scrollbar-width: none;
      gap: 4px;
      padding: 5px;
      border-radius: 10px;
    }
    .tabs::-webkit-scrollbar { display: none; }
    .tab-btn {
      flex: 0 0 auto;
      white-space: nowrap;
      font-size: 13px;
      padding: 10px 14px;
    }

    /* Client name */
    #client-name { max-width: 100% !important; }

    /* Layout: √∂sszes√≠t≈ë FEL√úLRE ker√ºl mobilon */
    .layout {
      display: flex;
      flex-direction: column-reverse; /* result panel first visually = last in DOM but first on screen */
      gap: 16px;
    }

    /* Result panel mobilon */
    .result-panel {
      position: static;
      /* √∂sszes√≠t≈ë legyen compact de l√°that√≥ */
    }
    .result-header { padding: 14px 16px 12px; }
    .result-body { padding: 14px 16px; }
    .total-net { font-size: 24px; }
    .result-total { padding: 14px 16px; }

    /* Form grids */
    .two-col, .three-col { grid-template-columns: 1fr; gap: 12px; }

    /* Section */
    .section-body { padding: 16px; }
    .section-header { padding: 14px 16px; }
    .section-title { font-size: 15px; }

    /* Check rows ‚Äì touch-bar√°t */
    .check-row {
      grid-template-columns: 1fr 100px 48px;
      padding: 13px 0;
      min-height: 48px;
    }
    .check-label { font-size: 13px; }
    .check-price { font-size: 12px; padding-right: 8px; }

    /* Toggle nagyobb touch ter√ºlettel */
    .toggle { width: 44px; height: 26px; }
    .toggle-slider { border-radius: 13px; }
    .toggle-slider:before { width: 18px; height: 18px; top: 3px; left: 3px; }
    .toggle input:checked + .toggle-slider:before { transform: translateX(18px); }

    /* Inline number inputs */
    .inline-num input { width: 56px; padding: 9px 8px; font-size: 14px; }

    /* Select & input */
    select, input[type="number"], input[type="text"] {
      font-size: 16px; /* iOS ne zoomoljon be */
      padding: 12px 14px;
    }
    select { padding-right: 36px; }

    /* Webshop type toggle */
    #tab-ws > div > div:first-child { flex-wrap: wrap; gap: 10px; }
    .ws-type-btn { padding: 9px 14px; font-size: 13px; }

    /* ‚îÄ‚îÄ WEBSHOP check-row-ok mobilon: sz√∂veg teljes sorba t√∂rik ‚îÄ‚îÄ */
    #tab-ws .check-row {
      grid-template-columns: 1fr 100px 48px;
    }
    #tab-ws .check-row .check-price {
      font-size: 12px;
      text-align: right;
      padding-right: 8px;
    }
    /* Spacer div elrejt√©se (statikus 0 Ft sorokn√°l) */
    #tab-ws .check-row > div[style*="width:40px"] {
      display: none;
    }

    /* Hint sz√∂veg */
    .hint { font-size: 11px; }

    /* Note box */
    .note-box { font-size: 12px; padding: 10px 12px; }
  }

  /* Extra kis k√©perny≈ë */
  @media (max-width: 380px) {
    .tab-btn { font-size: 12px; padding: 9px 11px; }
    .check-price { min-width: 0; font-size: 11px; }
    .total-net { font-size: 21px; }
  }

  /* Floating √∂sszes√≠t≈ë gomb ‚Äì csak mobilon */
  .fab-summary {
    display: none;
  }
  @media (max-width: 700px) {
    .fab-summary {
      display: flex;
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: var(--accent);
      color: white;
      border: none;
      border-radius: 24px;
      padding: 13px 24px;
      font-family: 'DM Sans', sans-serif;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      box-shadow: 0 4px 20px rgba(200,120,42,0.4);
      align-items: center;
      gap: 8px;
      z-index: 100;
      white-space: nowrap;
      transition: transform 0.15s, box-shadow 0.15s;
    }
    .fab-summary:active {
      transform: translateX(-50%) scale(0.96);
    }
    .fab-summary.hidden { display: none !important; }
  }

  /* Print ‚Äì csak az √∂sszes√≠t≈ë panel nyomtat√≥djon */
  @media print {
    body { background: white !important; }
    body > *:not(#print-view) { display: none !important; }
    #print-view { display: block !important; }
  }

  #print-view {
    display: none;
  }

  .print-page {
    font-family: 'DM Sans', sans-serif;
    max-width: 680px;
    margin: 0 auto;
    padding: 40px;
    color: #2d2a26;
  }

  .print-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 32px;
    padding-bottom: 20px;
    border-bottom: 2px solid #c8782a;
  }

  .print-logo {
    display: flex;
    align-items: center;
    gap: 12px;
  }

  .print-logo-mark {
    width: 40px; height: 40px;
    background: #c8782a;
    border-radius: 8px;
    display: flex; align-items: center; justify-content: center;
    color: white;
    font-family: 'Playfair Display', serif;
    font-size: 18px;
    font-weight: 700;
  }

  .print-logo-text {
    font-family: 'Playfair Display', serif;
    font-size: 20px;
    font-weight: 700;
    color: #2d2a26;
  }

  .print-meta {
    text-align: right;
    font-size: 12px;
    color: #7a7268;
    line-height: 1.6;
  }

  .print-title {
    font-family: 'Playfair Display', serif;
    font-size: 22px;
    font-weight: 700;
    color: #2d2a26;
    margin-bottom: 4px;
  }

  .print-subtitle {
    font-size: 13px;
    color: #7a7268;
    margin-bottom: 28px;
  }

  .print-client {
    background: #fdf5ee;
    border: 1px solid rgba(200,120,42,0.25);
    border-radius: 8px;
    padding: 12px 16px;
    margin-bottom: 24px;
    font-size: 13px;
    color: #7a7268;
  }

  .print-client strong {
    color: #2d2a26;
    font-size: 15px;
  }

  .print-section-label {
    font-size: 10px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 1.2px;
    color: #b0a89e;
    margin: 20px 0 8px;
  }

  .print-line {
    display: flex;
    justify-content: space-between;
    align-items: baseline;
    padding: 6px 0;
    border-bottom: 1px solid #f0eeeb;
    font-size: 13px;
  }

  .print-line .lbl { color: #2d2a26; }
  .print-line .val { color: #2d2a26; font-weight: 500; white-space: nowrap; margin-left: 16px; }
  .print-line .val.discount { color: #2e6b44; }
  .print-line .sub { font-size: 11px; color: #b0a89e; margin-top: 1px; }

  .print-ked-box {
    background: #f7fdf9;
    border: 1px solid #c2e0cc;
    border-radius: 8px;
    padding: 10px 14px;
    margin: 8px 0;
  }

  .print-ked-box .print-line { border-bottom-color: #e6f5ec; }
  .print-ked-box .print-line .lbl { color: #4a7a5a; }
  .print-ked-box .print-line .val { color: #2e6b44; }
  .print-ked-total {
    display: flex;
    justify-content: space-between;
    padding-top: 8px;
    margin-top: 4px;
    border-top: 1.5px solid #5a9e6e;
    font-size: 13px;
    font-weight: 600;
    color: #2e6b44;
  }

  .print-modalap {
    display: flex;
    justify-content: space-between;
    align-items: baseline;
    padding: 8px 0;
    border-bottom: 1px solid #e0dbd4;
    font-size: 13px;
    font-weight: 600;
  }

  .print-modalap .vals { display: flex; align-items: baseline; gap: 6px; }
  .print-modalap .orig { text-decoration: line-through; color: #b0a89e; font-size: 11px; font-weight: 400; }
  .print-modalap .arrow { color: #5a9e6e; font-size: 11px; }
  .print-modalap .new { color: #c8782a; font-size: 14px; }

  .print-total-box {
    margin-top: 24px;
    background: #2d2a26;
    border-radius: 10px;
    padding: 18px 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .print-total-box .lbl { color: #f5f4f2; font-size: 13px; font-weight: 500; }
  .print-total-box .val { color: #c8782a; font-size: 22px; font-weight: 700; font-family: 'Playfair Display', serif; }
  .print-total-box .gross { color: #b0a89e; font-size: 11px; margin-top: 2px; }

  .print-zar-box {
    margin-top: 16px;
    background: #fffbf2;
    border: 1.5px solid #e6a830;
    border-radius: 8px;
    padding: 12px 16px;
    font-size: 12px;
  }

  .print-zar-title { font-weight: 700; color: #b07a10; text-transform: uppercase; font-size: 10px; letter-spacing: 1px; margin-bottom: 4px; }
  .print-zar-text { color: #7a7268; line-height: 1.5; }
  .print-zar-amount { color: #b07a10; font-weight: 700; font-size: 13px; margin-top: 4px; }

  .print-footer {
    margin-top: 32px;
    padding-top: 16px;
    border-top: 1px solid #e0dbd4;
    font-size: 11px;
    color: #b0a89e;
    text-align: center;
    line-height: 1.6;
  }

  .print-btn {
    position: fixed;
    bottom: 24px;
    right: 24px;
    background: #c8782a;
    color: white;
    border: none;
    border-radius: 10px;
    padding: 12px 20px;
    font-family: 'DM Sans', sans-serif;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 8px;
    box-shadow: 0 4px 16px rgba(200,120,42,0.35);
    transition: background 0.15s;
    z-index: 100;
  }
  .print-btn:hover { background: #b06820; }
</style>
</head>
<body>

<header>
  <div class="logo-mark">SA</div>
  <div class="header-text">
    <h1>SukorAD√ì</h1>
    <p>K√∂nyvel√©si d√≠j kalkul√°tor</p>
  </div>
</header>

<button class="fab-summary" id="fab-btn" onclick="scrollToResult()">
  <span>‚Üì</span> √ñsszes√≠t≈ë
</button>

<div class="container">

  <!-- Client name -->
  <div style="margin-bottom:20px">
    <div style="background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);padding:18px 24px;display:flex;align-items:center;gap:16px">
      <span style="font-size:13px;color:var(--text-muted);white-space:nowrap;letter-spacing:0.5px">Aj√°nlatk√©r≈ë neve:</span>
      <input type="text" id="client-name" placeholder="pl. Kov√°cs P√©ter" oninput="updateClientName()" style="flex:1;max-width:360px">
    </div>
  </div>

  <!-- Tab selector -->
  <div class="tabs">
    <button class="tab-btn active" onclick="switchTab('ev')">Egy√©ni v√°llalkoz√≥</button>
    <button class="tab-btn" onclick="switchTab('ceg')">Gazdas√°gi t√°rsas√°g</button>
    <button class="tab-btn" onclick="switchTab('ws')">Webshop</button>
  </div>

  <!-- ==================== EV TAB ==================== -->
  <div class="tab-panel active" id="tab-ev">
    <div class="layout">
      <div>

        <!-- 1. Alapd√≠j -->
        <div class="section">
          <div class="section-header">
            <div class="section-num">1</div>
            <div class="section-title">Alapd√≠j</div>
          </div>
          <div class="section-body">
            <div class="two-col">
              <div class="field">
                <label>Havi k√∂nyvel√©si t√©telsz√°m</label>
                <select id="ev-tetelek" onchange="calc()">
                  <option value="45000">0‚Äì70 t√©tel</option>
                  <option value="60000">71‚Äì150 t√©tel</option>
                  <option value="90000">151‚Äì250 t√©tel</option>
                  <option value="130000">251‚Äì350 t√©tel</option>
                  <option value="160000">351‚Äì500 t√©tel</option>
                  <option value="190000">501‚Äì700 t√©tel</option>
                  <option value="0">700+ (egyedi aj√°nlat)</option>
                </select>
              </div>
              <div class="field">
                <label>√âves √°rbev√©tel</label>
                <select id="ev-arbev" onchange="calc()">
                  <option value="0">0‚Äì50 milli√≥ Ft</option>
                  <option value="10000">50‚Äì100 milli√≥ Ft</option>
                  <option value="20000">100‚Äì250 milli√≥ Ft</option>
                  <option value="40000">250‚Äì500 milli√≥ Ft</option>
                  <option value="60000">500‚Äì700 milli√≥ Ft</option>
                  <option value="80000">700‚Äì900 milli√≥ Ft</option>
                  <option value="-1">900 milli√≥ felett (egyedi)</option>
                </select>
              </div>
            </div>

            <div class="field">
              <label>Ad√≥z√°si forma</label>
              <select id="ev-adozas" onchange="calc()">
                <option value="0">V√°llalkoz√≥i SZJA</option>
                <option value="kata">KATA (‚Äì50% alapd√≠jb√≥l)</option>
                <option value="atalany">√Åtal√°nyad√≥z√°s (‚Äì20% alapd√≠jb√≥l)</option>
              </select>
            </div>
          </div>
        </div>

        <!-- 2. Kedvezm√©nyek -->
        <div class="section section-ked">
          <div class="section-header">
            <div class="section-num">2</div>
            <div class="section-title">Kedvezm√©nyek</div>
          </div>
          <div class="section-body">
            <div class="check-row">
              <div>
                <div class="check-label">Kiegyenl√≠tett sz√°ml√°kr√≥l hat√°rid≈ën bel√ºli inform√°ci√≥szolg√°ltat√°s</div>
              </div>
              <div class="check-price">‚Äì10% alapd√≠j</div>
              <label class="toggle"><input type="checkbox" id="ev-ked1" onchange="calc()"><span class="toggle-slider"></span></label>
            </div>
            <div class="check-row">
              <div>
                <div class="check-label">Hat√°rid≈ëben t√∂rt√©n≈ë d√≠jfizet√©s</div>
              </div>
              <div class="check-price">‚Äì5% alapd√≠j</div>
              <label class="toggle"><input type="checkbox" id="ev-ked2" onchange="calc()"><span class="toggle-slider"></span></label>
            </div>
            <div class="check-row">
              <div>
                <div class="check-label">√âves √°rbev√©tel 1 800 000 Ft alatt</div>
              </div>
              <div class="check-price">‚Äì5% alapd√≠j</div>
              <label class="toggle"><input type="checkbox" id="ev-ked3" onchange="calc()"><span class="toggle-slider"></span></label>
            </div>
            <div class="divider"></div>
            <div class="egyedi-ked-block">
              <div class="two-col" style="margin-bottom:8px">
                <div class="field">
                  <label>Egyedi kedvezm√©ny ‚Äì jogc√≠m</label>
                  <input type="text" id="ev-ked-jogcim" placeholder="pl. c√©gcsoport kedvezm√©ny" oninput="updateEgyediLabel('ev'); calc()">
                </div>
                <div class="field">
                  <label>M√©rt√©ke (% az alapd√≠jb√≥l)</label>
                  <div style="position:relative">
                    <input type="number" id="ev-ked-egyedi" min="0" max="100" value="" placeholder="0" onchange="calc()" style="padding-right:32px">
                    <span style="position:absolute;right:12px;top:50%;transform:translateY(-50%);color:var(--text-muted);font-size:14px;pointer-events:none">%</span>
                  </div>
                </div>
              </div>
              <div class="hint">Szabadon megadhat√≥ kedvezm√©ny az alapd√≠j sz√°zal√©k√°ban ‚Äì pl. c√©gcsoport, hossz√∫ t√°v√∫ szerz≈ëd√©s stb.</div>
            </div>
          </div>
        </div>

        <!-- 3. B√©rsz√°mfejt√©s -->
        <div class="section">
          <div class="section-header">
            <div class="section-num">3</div>
            <div class="section-title">B√©rsz√°mfejt√©s</div>
          </div>
          <div class="section-body">
            <div class="three-col">
              <div class="field">
                <label>Egyszer≈± havib√©res (f≈ë)</label>
                <input type="number" id="ev-ber-egyszer" min="0" value="0" onchange="calc()">
                <div class="hint">1‚Äì5 f≈ë: 6 000 Ft/f≈ë | 6‚Äì20: 5 000 | 21+: 3 500</div>
              </div>
              <div class="field">
                <label>1 letilt√°s / p√≥tl√©k / t√∫l√≥ra (f≈ë)</label>
                <input type="number" id="ev-ber-1let" min="0" value="0" onchange="calc()">
                <div class="hint">6 000 Ft/f≈ë/h√≥</div>
              </div>
              <div class="field">
                <label>T√∂bb letilt√°s / komplex (f≈ë)</label>
                <input type="number" id="ev-ber-tobbet" min="0" value="0" onchange="calc()">
                <div class="hint">7 500 Ft/f≈ë/h√≥</div>
              </div>
            </div>
            <div class="two-col" style="margin-top:16px">
              <div class="field">
                <label>J√∂vedelem n√©lk√ºli / passz√≠v tag (f≈ë)</label>
                <input type="number" id="ev-ber-passz" min="0" value="0" onchange="calc()">
                <div class="hint">2 000 Ft/f≈ë/h√≥</div>
              </div>
              <div class="field">
                <label>B√©relt ingatlan mag√°nszem√©lyt≈ël (f≈ë)</label>
                <input type="number" id="ev-ber-ingatlan" min="0" value="0" onchange="calc()">
                <div class="hint">5 000 Ft/f≈ë/h√≥</div>
              </div>
            </div>
          </div>
        </div>

        <!-- 4. Rendszeres feladatok -->
        <div class="section">
          <div class="section-header">
            <div class="section-num">4</div>
            <div class="section-title">Rendszeres feladatok</div>
          </div>
          <div class="section-body">
            <div class="check-row">
              <div>
                <div class="check-label">√ÅFA bevall√°s</div>
              </div>
              <div class="check-price">5 000 Ft/h√≥</div>
              <label class="toggle"><input type="checkbox" id="ev-afa" onchange="calc()"><span class="toggle-slider"></span></label>
            </div>
            <div class="check-row">
              <div>
                <div class="check-label">A60-as √ÅFA √∂sszes√≠t≈ë</div>
                <div class="check-sub">Csak ha van √ÅFA bevall√°s</div>
              </div>
              <div class="check-price">2 000 Ft/h√≥</div>
              <label class="toggle"><input type="checkbox" id="ev-a60" onchange="calc()"><span class="toggle-slider"></span></label>
            </div>
            <div class="check-row">
              <div>
                <div class="check-label">KSH jelent√©s</div>
              </div>
              <div class="check-price">10 000 Ft/alkalom</div>
              <label class="toggle"><input type="checkbox" id="ev-ksh" onchange="calc()"><span class="toggle-slider"></span></label>
            </div>
            <div class="check-row">
              <div>
                <div class="check-label">C√©gaut√≥ad√≥ bevall√°s</div>
                <div class="check-sub">Negyed√©ves ‚Üí havi bont√°sban: 1 667 Ft/aut√≥/h√≥</div>
              </div>
              <div class="check-price">5 000 Ft/aut√≥/negyed.</div>
              <div class="inline-num">
                <input type="number" id="ev-cegauto" min="0" value="0" onchange="calc()" style="width:60px">
                <span style="font-size:12px;color:var(--text-muted)">aut√≥</span>
              </div>
            </div>
            <div class="check-row">
              <div>
                <div class="check-label">Turizmusfejleszt√©si hozz√°j√°rul√°s</div>
              </div>
              <div class="check-price">5 000 Ft</div>
              <label class="toggle"><input type="checkbox" id="ev-turizmus" onchange="calc()"><span class="toggle-slider"></span></label>
            </div>
            <div class="check-row">
              <div>
                <div class="check-label">Reprezent√°ci√≥s k√∂lts√©gek bevall√°sa</div>
              </div>
              <div class="check-price">10 000 Ft</div>
              <label class="toggle"><input type="checkbox" id="ev-repr" onchange="calc()"><span class="toggle-slider"></span></label>
            </div>
          </div>
        </div>

      </div><!-- /left col -->

      <!-- Result panel EV -->
      <div>
        <div class="result-panel" id="ev-result-panel">
          <div class="result-header">
            <div class="result-title">Becs√ºlt havi d√≠j</div>
            <div class="result-subtitle">Egy√©ni v√°llalkoz√≥ ¬∑ √Åfamentes (alanyi mentes)</div>
            <div id="ev-client-display" style="margin-top:8px;font-size:13px;color:var(--accent);display:none"></div>
          </div>
          <div class="result-body">

            <div class="result-section-label">Alapd√≠j</div>
            <div class="result-line"><span class="lbl">T√©telsz√°m szerinti d√≠j<div class="result-sub" id="ev-r-alap-sav"></div></span><span class="val" id="ev-r-alap">‚Äì</span></div>
            <div class="result-line" id="ev-r-arbev-row"><span class="lbl">√Årbev√©tel fel√°r<div class="result-sub" id="ev-r-arbev-sav"></div></span><span class="val" id="ev-r-arbev">‚Äì</span></div>

            <div class="ked-box" id="ev-r-ked-section" style="display:none">
              <div class="ked-box-header">üéÅ Kedvezm√©nyek</div>
              <div class="ked-box-body">
                <div class="result-line discount" id="ev-r-adozas-row" style="display:none"><span class="lbl" id="ev-r-adozas-lbl">Ad√≥z√°si kedvezm√©ny</span><span class="val" id="ev-r-adozas">‚Äì</span></div>
                <div class="result-line discount" id="ev-r-ked1-row" style="display:none"><span class="lbl">Hat√°rid≈ës inform√°ci√≥szolg√°ltat√°s (‚Äì10%)</span><span class="val" id="ev-r-ked1">‚Äì</span></div>
                <div class="result-line discount" id="ev-r-ked2-row" style="display:none"><span class="lbl">Hat√°rid≈ës d√≠jfizet√©s (‚Äì5%)</span><span class="val" id="ev-r-ked2">‚Äì</span></div>
                <div class="result-line discount" id="ev-r-ked3-row" style="display:none"><span class="lbl">√Årbev√©tel 1,8 M Ft alatt (‚Äì5%)</span><span class="val" id="ev-r-ked3">‚Äì</span></div>
                <div class="result-line discount" id="ev-r-egyedi-row" style="display:none"><span class="lbl" id="ev-r-egyedi-lbl">Egyedi kedvezm√©ny</span><span class="val" id="ev-r-egyedi">‚Äì</span></div>
              </div>
              <div class="ked-box-total">
                <span class="lbl">Kedvezm√©ny √∂sszesen</span>
                <span class="val" id="ev-r-ked-total">‚Äì</span>
              </div>
            </div>

            <div class="subtotal-ked" id="ev-r-modalap-row">
              <span class="lbl">M√≥dos√≠tott alapd√≠j</span>
              <span class="vals">
                <span class="val-orig" id="ev-r-modalap-orig" style="display:none">‚Äì</span>
                <span class="val-arrow" id="ev-r-modalap-arrow" style="display:none">‚Üí</span>
                <span class="val-new" id="ev-r-modalap">‚Äì</span>
              </span>
            </div>

            <div class="result-section-label" id="ev-r-ber-section" style="display:none">B√©rsz√°mfejt√©s</div>
            <div class="result-line" id="ev-r-ber-egyszer-row" style="display:none"><span class="lbl">Egyszer≈± havib√©res</span><span class="val" id="ev-r-ber-egyszer">‚Äì</span></div>
            <div class="result-line" id="ev-r-ber-1let-row" style="display:none"><span class="lbl">1 letilt√°s / p√≥tl√©k</span><span class="val" id="ev-r-ber-1let">‚Äì</span></div>
            <div class="result-line" id="ev-r-ber-tobbet-row" style="display:none"><span class="lbl">T√∂bb letilt√°s / komplex</span><span class="val" id="ev-r-ber-tobbet">‚Äì</span></div>
            <div class="result-line" id="ev-r-ber-passz-row" style="display:none"><span class="lbl">Passz√≠v / j√∂vedelem n√©lk√ºli tag</span><span class="val" id="ev-r-ber-passz">‚Äì</span></div>
            <div class="result-line" id="ev-r-ber-ingatlan-row" style="display:none"><span class="lbl">B√©relt ingatlan mag√°nszem√©lyt≈ël</span><span class="val" id="ev-r-ber-ingatlan">‚Äì</span></div>

            <div class="result-section-label" id="ev-r-rend-section" style="display:none">Rendszeres feladatok</div>
            <div class="result-line" id="ev-r-afa-row" style="display:none"><span class="lbl">√ÅFA bevall√°s</span><span class="val" id="ev-r-afa">‚Äì</span></div>
            <div class="result-line" id="ev-r-a60-row" style="display:none"><span class="lbl">A60-as √ÅFA √∂sszes√≠t≈ë</span><span class="val" id="ev-r-a60">‚Äì</span></div>
            <div class="result-line" id="ev-r-ksh-row" style="display:none"><span class="lbl">KSH jelent√©s</span><span class="val" id="ev-r-ksh">‚Äì</span></div>
            <div class="result-line" id="ev-r-cegauto-row" style="display:none"><span class="lbl">C√©gaut√≥ad√≥ (havi ar√°ny)</span><span class="val" id="ev-r-cegauto">‚Äì</span></div>
            <div class="result-line" id="ev-r-turizmus-row" style="display:none"><span class="lbl">Turizmusfejleszt√©si hozz√°j√°rul√°s</span><span class="val" id="ev-r-turizmus">‚Äì</span></div>
            <div class="result-line" id="ev-r-repr-row" style="display:none"><span class="lbl">Reprezent√°ci√≥s ktg. bevall√°s</span><span class="val" id="ev-r-repr">‚Äì</span></div>

            <div class="result-total">
              <div class="total-label">Havi becs√ºlt d√≠j</div>
              <div class="total-net" id="ev-total">‚Äì</div>
              <div class="total-gross" style="color:var(--green);font-size:12px;margin-top:4px">‚úì √Åfamentes ‚Äì alanyi ad√≥mentes sz√°ml√°z√°s</div>
            </div>

            <div class="note-box" id="ev-egyedi-note" style="display:none">
              ‚ö†Ô∏è Egyedi aj√°nlat sz√ºks√©ges ‚Äì k√©rj√ºk, vegye fel vel√ºnk a kapcsolatot!
            </div>
            <div class="note-box" style="margin-top:10px">
              Az √°rak t√°j√©koztat√≥ jelleg≈±ek. A v√©gleges d√≠j az √≠r√°sos szerz≈ëd√©sben ker√ºl r√∂gz√≠t√©sre.
            </div>
          </div>
        </div>
      </div>
    </div><!-- /layout -->
  </div><!-- /ev tab -->


  <!-- ==================== C√âG TAB ==================== -->
  <div class="tab-panel" id="tab-ceg">
    <div class="layout">
      <div>

        <div class="section">
          <div class="section-header">
            <div class="section-num">1</div>
            <div class="section-title">Alapd√≠j</div>
          </div>
          <div class="section-body">
            <div class="two-col">
              <div class="field">
                <label>Havi k√∂nyvel√©si t√©telsz√°m</label>
                <select id="ceg-tetelek" onchange="calc()">
                  <option value="45000">0‚Äì70 t√©tel</option>
                  <option value="60000">71‚Äì150 t√©tel</option>
                  <option value="90000">151‚Äì250 t√©tel</option>
                  <option value="130000">251‚Äì350 t√©tel</option>
                  <option value="160000">351‚Äì500 t√©tel</option>
                  <option value="190000">501‚Äì700 t√©tel</option>
                  <option value="0">700+ (egyedi aj√°nlat)</option>
                </select>
              </div>
              <div class="field">
                <label>√âves √°rbev√©tel</label>
                <select id="ceg-arbev" onchange="calc()">
                  <option value="0">0‚Äì50 milli√≥ Ft</option>
                  <option value="10000">50‚Äì100 milli√≥ Ft</option>
                  <option value="20000">100‚Äì250 milli√≥ Ft</option>
                  <option value="40000">250‚Äì500 milli√≥ Ft</option>
                  <option value="60000">500‚Äì700 milli√≥ Ft</option>
                  <option value="80000">700‚Äì900 milli√≥ Ft</option>
                  <option value="-1">900 milli√≥ felett (egyedi)</option>
                </select>
              </div>
            </div>
          </div>
        </div>

        <div class="section section-ked">
          <div class="section-header">
            <div class="section-num">2</div>
            <div class="section-title">Kedvezm√©nyek</div>
          </div>
          <div class="section-body">
            <div class="check-row">
              <div><div class="check-label">Sz√°ml√°k / bankkivonatok hat√°rid≈ëre, hi√°nytalanul felt√∂ltve az EDITH-be</div></div>
              <div class="check-price">‚Äì10% alapd√≠j</div>
              <label class="toggle"><input type="checkbox" id="ceg-ked1" onchange="calc()"><span class="toggle-slider"></span></label>
            </div>
            <div class="check-row">
              <div><div class="check-label">Hat√°rid≈ëben t√∂rt√©n≈ë d√≠jfizet√©s</div></div>
              <div class="check-price">‚Äì5% alapd√≠j</div>
              <label class="toggle"><input type="checkbox" id="ceg-ked2" onchange="calc()"><span class="toggle-slider"></span></label>
            </div>
            <div class="divider"></div>
            <div class="egyedi-ked-block">
              <div class="two-col" style="margin-bottom:8px">
                <div class="field">
                  <label>Egyedi kedvezm√©ny ‚Äì jogc√≠m</label>
                  <input type="text" id="ceg-ked-jogcim" placeholder="pl. c√©gcsoport kedvezm√©ny" oninput="updateEgyediLabel('ceg'); calc()">
                </div>
                <div class="field">
                  <label>M√©rt√©ke (% az alapd√≠jb√≥l)</label>
                  <div style="position:relative">
                    <input type="number" id="ceg-ked-egyedi" min="0" max="100" value="" placeholder="0" onchange="calc()" style="padding-right:32px">
                    <span style="position:absolute;right:12px;top:50%;transform:translateY(-50%);color:var(--text-muted);font-size:14px;pointer-events:none">%</span>
                  </div>
                </div>
              </div>
              <div class="hint">Szabadon megadhat√≥ kedvezm√©ny az alapd√≠j sz√°zal√©k√°ban ‚Äì pl. c√©gcsoport, hossz√∫ t√°v√∫ szerz≈ëd√©s stb.</div>
            </div>
          </div>
        </div>

        <div class="section">
          <div class="section-header">
            <div class="section-num">3</div>
            <div class="section-title">B√©rsz√°mfejt√©s</div>
          </div>
          <div class="section-body">
            <div class="three-col">
              <div class="field">
                <label>Egyszer≈± havib√©res (f≈ë)</label>
                <input type="number" id="ceg-ber-egyszer" min="0" value="0" onchange="calc()">
                <div class="hint">1‚Äì5 f≈ë: 6 000 | 6‚Äì20: 5 000 | 21+: 3 500 Ft/f≈ë</div>
              </div>
              <div class="field">
                <label>1 letilt√°s / p√≥tl√©k (f≈ë)</label>
                <input type="number" id="ceg-ber-1let" min="0" value="0" onchange="calc()">
                <div class="hint">6 000 Ft/f≈ë/h√≥</div>
              </div>
              <div class="field">
                <label>T√∂bb letilt√°s / komplex (f≈ë)</label>
                <input type="number" id="ceg-ber-tobbet" min="0" value="0" onchange="calc()">
                <div class="hint">7 500 Ft/f≈ë/h√≥</div>
              </div>
            </div>
            <div class="two-col" style="margin-top:16px">
              <div class="field">
                <label>J√∂vedelem n√©lk√ºli / passz√≠v tag (f≈ë)</label>
                <input type="number" id="ceg-ber-passz" min="0" value="0" onchange="calc()">
                <div class="hint">2 000 Ft/f≈ë/h√≥</div>
              </div>
              <div class="field">
                <label>B√©relt ingatlan mag√°nszem√©lyt≈ël (f≈ë)</label>
                <input type="number" id="ceg-ber-ingatlan" min="0" value="0" onchange="calc()">
                <div class="hint">5 000 Ft/f≈ë/h√≥</div>
              </div>
            </div>
          </div>
        </div>

        <div class="section">
          <div class="section-header">
            <div class="section-num">4</div>
            <div class="section-title">Rendszeres feladatok</div>
          </div>
          <div class="section-body">
            <div class="check-row">
              <div><div class="check-label">√ÅFA bevall√°s</div></div>
              <div class="check-price">5 000 Ft/h√≥</div>
              <label class="toggle"><input type="checkbox" id="ceg-afa" onchange="calc()"><span class="toggle-slider"></span></label>
            </div>
            <div class="check-row">
              <div><div class="check-label">A60-as √ÅFA √∂sszes√≠t≈ë</div><div class="check-sub">Csak ha van √ÅFA bevall√°s</div></div>
              <div class="check-price">2 000 Ft/h√≥</div>
              <label class="toggle"><input type="checkbox" id="ceg-a60" onchange="calc()"><span class="toggle-slider"></span></label>
            </div>
            <div class="check-row">
              <div><div class="check-label">KIVA el≈ëleg bevall√°s</div><div class="check-sub">Negyed√©ves ‚Üí havi bont√°sban: 1 667 Ft/h√≥</div></div>
              <div class="check-price">5 000 Ft/negyed.</div>
              <label class="toggle"><input type="checkbox" id="ceg-kiva" onchange="calc()"><span class="toggle-slider"></span></label>
            </div>
            <div class="check-row">
              <div><div class="check-label">KSH jelent√©s</div></div>
              <div class="check-price">10 000 Ft/alkalom</div>
              <label class="toggle"><input type="checkbox" id="ceg-ksh" onchange="calc()"><span class="toggle-slider"></span></label>
            </div>
            <div class="check-row">
              <div><div class="check-label">C√©gaut√≥ad√≥ bevall√°s</div><div class="check-sub">Negyed√©ves ‚Üí havi bont√°sban: 1 667 Ft/aut√≥/h√≥</div></div>
              <div class="check-price">5 000 Ft/aut√≥/negyed.</div>
              <div class="inline-num">
                <input type="number" id="ceg-cegauto" min="0" value="0" onchange="calc()" style="width:60px">
                <span style="font-size:12px;color:var(--text-muted)">aut√≥</span>
              </div>
            </div>
            <div class="check-row">
              <div><div class="check-label">Turizmusfejleszt√©si hozz√°j√°rul√°s</div></div>
              <div class="check-price">5 000 Ft</div>
              <label class="toggle"><input type="checkbox" id="ceg-turizmus" onchange="calc()"><span class="toggle-slider"></span></label>
            </div>
            <div class="check-row">
              <div><div class="check-label">Reprezent√°ci√≥s k√∂lts√©gek bevall√°sa</div></div>
              <div class="check-price">10 000 Ft</div>
              <label class="toggle"><input type="checkbox" id="ceg-repr" onchange="calc()"><span class="toggle-slider"></span></label>
            </div>
          </div>
        </div>

      </div><!-- /left col -->

      <!-- Result panel C√âG -->
      <div>
        <div class="result-panel" id="ceg-result">
          <div class="result-header">
            <div class="result-title">Becs√ºlt havi d√≠j</div>
            <div class="result-subtitle">Gazdas√°gi t√°rsas√°g ¬∑ Nett√≥ √°rak</div>
            <div id="ceg-client-display" style="margin-top:8px;font-size:13px;color:var(--accent);display:none"></div>
          </div>
          <div class="result-body">

            <div class="result-section-label">Alapd√≠j</div>
            <div class="result-line"><span class="lbl">T√©telsz√°m szerinti d√≠j<div class="result-sub" id="ceg-r-alap-sav"></div></span><span class="val" id="ceg-r-alap">‚Äì</span></div>
            <div class="result-line" id="ceg-r-arbev-row"><span class="lbl">√Årbev√©tel fel√°r<div class="result-sub" id="ceg-r-arbev-sav"></div></span><span class="val" id="ceg-r-arbev">‚Äì</span></div>

            <div class="ked-box" id="ceg-r-ked-section" style="display:none">
              <div class="ked-box-header">üéÅ Kedvezm√©nyek</div>
              <div class="ked-box-body">
                <div class="result-line discount" id="ceg-r-ked1-row" style="display:none"><span class="lbl">Hat√°rid≈ës felt√∂lt√©s EDITH-be (‚Äì10%)</span><span class="val" id="ceg-r-ked1">‚Äì</span></div>
                <div class="result-line discount" id="ceg-r-ked2-row" style="display:none"><span class="lbl">Hat√°rid≈ës d√≠jfizet√©s (‚Äì5%)</span><span class="val" id="ceg-r-ked2">‚Äì</span></div>
                <div class="result-line discount" id="ceg-r-egyedi-row" style="display:none"><span class="lbl" id="ceg-r-egyedi-lbl">Egyedi kedvezm√©ny</span><span class="val" id="ceg-r-egyedi">‚Äì</span></div>
              </div>
              <div class="ked-box-total">
                <span class="lbl">Kedvezm√©ny √∂sszesen</span>
                <span class="val" id="ceg-r-ked-total">‚Äì</span>
              </div>
            </div>

            <div class="subtotal-ked" id="ceg-r-modalap-row">
              <span class="lbl">M√≥dos√≠tott alapd√≠j</span>
              <span class="vals">
                <span class="val-orig" id="ceg-r-modalap-orig" style="display:none">‚Äì</span>
                <span class="val-arrow" id="ceg-r-modalap-arrow" style="display:none">‚Üí</span>
                <span class="val-new" id="ceg-r-modalap">‚Äì</span>
              </span>
            </div>

            <div class="result-section-label" id="ceg-r-ber-section" style="display:none">B√©rsz√°mfejt√©s</div>
            <div class="result-line" id="ceg-r-ber-egyszer-row" style="display:none"><span class="lbl">Egyszer≈± havib√©res</span><span class="val" id="ceg-r-ber-egyszer">‚Äì</span></div>
            <div class="result-line" id="ceg-r-ber-1let-row" style="display:none"><span class="lbl">1 letilt√°s / p√≥tl√©k</span><span class="val" id="ceg-r-ber-1let">‚Äì</span></div>
            <div class="result-line" id="ceg-r-ber-tobbet-row" style="display:none"><span class="lbl">T√∂bb letilt√°s / komplex</span><span class="val" id="ceg-r-ber-tobbet">‚Äì</span></div>
            <div class="result-line" id="ceg-r-ber-passz-row" style="display:none"><span class="lbl">Passz√≠v / j√∂vedelem n√©lk√ºli tag</span><span class="val" id="ceg-r-ber-passz">‚Äì</span></div>
            <div class="result-line" id="ceg-r-ber-ingatlan-row" style="display:none"><span class="lbl">B√©relt ingatlan mag√°nszem√©lyt≈ël</span><span class="val" id="ceg-r-ber-ingatlan">‚Äì</span></div>

            <div class="result-section-label" id="ceg-r-rend-section" style="display:none">Rendszeres feladatok</div>
            <div class="result-line" id="ceg-r-afa-row" style="display:none"><span class="lbl">√ÅFA bevall√°s</span><span class="val" id="ceg-r-afa">‚Äì</span></div>
            <div class="result-line" id="ceg-r-a60-row" style="display:none"><span class="lbl">A60-as √ÅFA √∂sszes√≠t≈ë</span><span class="val" id="ceg-r-a60">‚Äì</span></div>
            <div class="result-line" id="ceg-r-kiva-row" style="display:none"><span class="lbl">KIVA el≈ëleg (havi ar√°ny)</span><span class="val" id="ceg-r-kiva">‚Äì</span></div>
            <div class="result-line" id="ceg-r-ksh-row" style="display:none"><span class="lbl">KSH jelent√©s</span><span class="val" id="ceg-r-ksh">‚Äì</span></div>
            <div class="result-line" id="ceg-r-cegauto-row" style="display:none"><span class="lbl">C√©gaut√≥ad√≥ (havi ar√°ny)</span><span class="val" id="ceg-r-cegauto">‚Äì</span></div>
            <div class="result-line" id="ceg-r-turizmus-row" style="display:none"><span class="lbl">Turizmusfejleszt√©si hozz√°j√°rul√°s</span><span class="val" id="ceg-r-turizmus">‚Äì</span></div>
            <div class="result-line" id="ceg-r-repr-row" style="display:none"><span class="lbl">Reprezent√°ci√≥s ktg. bevall√°s</span><span class="val" id="ceg-r-repr">‚Äì</span></div>

            <div class="result-total">
              <div class="total-label">Havi becs√ºlt d√≠j (nett√≥)</div>
              <div class="total-net" id="ceg-total">‚Äì</div>
              <div class="total-gross">Brutt√≥ (27% √ÅFA): <span id="ceg-total-gross">‚Äì</span></div>
            </div>
            <div class="note-box" id="ceg-egyedi-note" style="display:none">
              ‚ö†Ô∏è Egyedi aj√°nlat sz√ºks√©ges ‚Äì k√©rj√ºk, vegye fel vel√ºnk a kapcsolatot!
            </div>
            <div class="eves-zar-box">
              <div class="eves-zar-icon">üìÖ</div>
              <div class="eves-zar-body">
                <div class="eves-zar-title">√âves z√°r√°s ‚Äì egyszer sz√°ml√°zva</div>
                <div class="eves-zar-text">Az √©ves z√°r√°s d√≠ja 1 havi alapd√≠j, k√∂nyvvizsg√°lattal 1,5√ó. Ez nem szerepel a havi d√≠jban.</div>
                <div class="eves-zar-amount" id="ceg-zar-amount">‚Äì</div>
              </div>
            </div>
            <div class="note-box" style="margin-top:10px">
              Az √°rak t√°j√©koztat√≥k, nett√≥k.
            </div>
          </div>
        </div>
      </div>
    </div>
  </div><!-- /ceg tab -->


  <!-- ==================== WEBSHOP TAB ==================== -->
  <div class="tab-panel" id="tab-ws">
    <div class="layout">
      <div>

        <!-- EV/C√©g kapcsol√≥ -->
        <div style="background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);padding:16px 24px;margin-bottom:16px;display:flex;align-items:center;gap:16px;flex-wrap:wrap">
          <span style="font-size:13px;color:var(--text-muted);letter-spacing:0.5px">V√°llalkoz√°s t√≠pusa:</span>
          <div style="display:flex;background:var(--bg);border:1px solid var(--border);border-radius:8px;padding:4px;gap:4px">
            <button id="ws-toggle-ceg" class="ws-type-btn active" onclick="setWsType('ceg')">Gazdas√°gi t√°rsas√°g</button>
            <button id="ws-toggle-ev" class="ws-type-btn" onclick="setWsType('ev')">Egy√©ni v√°llalkoz√≥</button>
          </div>
          <span id="ws-type-note" style="font-size:12px;color:var(--text-muted)">Sz√°ml√°z√°s: +27% √ÅFA</span>
        </div>

        <!-- 1. Alapd√≠j -->
        <div class="section">
          <div class="section-header">
            <div class="section-num">1</div>
            <div class="section-title">Webshop alapd√≠j</div>
          </div>
          <div class="section-body">
            <div class="two-col">
              <div class="field">
                <label>Havi rendel√©si volumen</label>
                <select id="ws-rendeles" onchange="calc()">
                  <option value="75000">0‚Äì300 rendel√©s</option>
                  <option value="95000">301‚Äì800 rendel√©s</option>
                  <option value="130000">801‚Äì1 500 rendel√©s</option>
                  <option value="170000">1 501‚Äì3 000 rendel√©s</option>
                  <option value="0">3 000+ (egyedi aj√°nlat)</option>
                </select>
              </div>
              <div class="field">
                <label>√âves webshop √°rbev√©tel</label>
                <select id="ws-arbev" onchange="calc()">
                  <option value="0">0‚Äì150 milli√≥ Ft</option>
                  <option value="15000">150‚Äì400 milli√≥ Ft</option>
                  <option value="30000">400‚Äì800 milli√≥ Ft</option>
                  <option value="50000">800 M ‚Äì 1,5 milli√°rd Ft</option>
                  <option value="-1">1,5 milli√°rd Ft felett (egyedi)</option>
                </select>
              </div>
            </div>
          </div>
        </div>

        <!-- 3. Komplexit√°si fel√°rak -->
        <div class="section">
          <div class="section-header">
            <div class="section-num">3</div>
            <div class="section-title">Komplexit√°si fel√°rak</div>
          </div>
          <div class="section-body">

            <div style="margin-bottom:16px">
              <label style="margin-bottom:12px;font-size:12px;text-transform:uppercase;letter-spacing:1px;color:var(--text-muted)">Banksz√°ml√°k</label>
              <div class="check-row">
                <div>
                  <div class="check-label">HUF banksz√°mla</div>
                  <div class="check-sub">Az 1. banksz√°mla az alapd√≠jban szerepel, a 2. db-t≈ël fel√°r</div>
                </div>
                <div class="check-price">+10 000 Ft/db</div>
                <div class="inline-num">
                  <input type="number" id="ws-bank-huf" min="1" value="1" onchange="calc()" style="width:60px">
                  <span style="font-size:12px;color:var(--text-muted)">db</span>
                </div>
              </div>
              <div class="check-row">
                <div>
                  <div class="check-label">Deviz√°s banksz√°mla (devizanemenk√©nt)</div>
                  <div class="check-sub">Minden devizanem k√ºl√∂n sz√°m√≠t</div>
                </div>
                <div class="check-price">+15 000 Ft/db</div>
                <div class="inline-num">
                  <input type="number" id="ws-devbank" min="0" value="0" onchange="calc()" style="width:60px">
                  <span style="font-size:12px;color:var(--text-muted)">db</span>
                </div>
              </div>
            </div>

            <div class="divider"></div>

            <div style="margin-bottom:16px">
              <label style="margin-bottom:12px;font-size:12px;text-transform:uppercase;letter-spacing:1px;color:var(--text-muted)">Fizet√©si szolg√°ltat√≥k</label>
              <div class="check-row">
                <div><div class="check-label">1. bankk√°rtya-elsz√°mol√≥</div><div class="check-sub">Alapd√≠j tartalmazza</div></div>
                <div class="check-price">0 Ft</div>
                <div style="width:40px"></div>
              </div>
              <div class="check-row">
                <div><div class="check-label">Tov√°bbi bankk√°rtya-elsz√°mol√≥</div></div>
                <div class="check-price">+15 000 Ft</div>
                <label class="toggle"><input type="checkbox" id="ws-kart2" onchange="calc()"><span class="toggle-slider"></span></label>
              </div>
              <div class="check-row">
                <div><div class="check-label">1 fut√°rszolg√°lat ut√°nv√©tes elsz√°mol√°ssal</div><div class="check-sub">Alapd√≠j tartalmazza</div></div>
                <div class="check-price">0 Ft</div>
                <div style="width:40px"></div>
              </div>
              <div class="check-row">
                <div><div class="check-label">Tov√°bbi fut√°rszolg√°lat (darabonk√©nt)</div></div>
                <div class="check-price">+10 000 Ft/fut√°r</div>
                <div class="inline-num">
                  <input type="number" id="ws-futar" min="0" value="0" onchange="calc()" style="width:60px">
                  <span style="font-size:12px;color:var(--text-muted)">db</span>
                </div>
              </div>

            </div>

            <div class="divider"></div>

            <div style="margin-bottom:16px">
              <label style="margin-bottom:12px;font-size:12px;text-transform:uppercase;letter-spacing:1px;color:var(--text-muted)">Nemzetk√∂zi √ºgyletek</label>
              <div class="check-row">
                <div><div class="check-label">EU-s beszerz√©sek rendszeres k√∂nyvel√©se</div></div>
                <div class="check-price">+15 000 Ft</div>
                <label class="toggle"><input type="checkbox" id="ws-eubesz" onchange="calc()"><span class="toggle-slider"></span></label>
              </div>
              <div class="check-row">
                <div><div class="check-label">EU-s √©rt√©kes√≠t√©s (OSS rendszer)</div></div>
                <div class="check-price">+25 000 Ft</div>
                <label class="toggle"><input type="checkbox" id="ws-oss" onchange="calc()"><span class="toggle-slider"></span></label>
              </div>
              <div class="check-row">
                <div><div class="check-label">Harmadik orsz√°gb√≥l t√∂rt√©n≈ë beszerz√©s</div></div>
                <div class="check-price">+20 000 Ft</div>
                <label class="toggle"><input type="checkbox" id="ws-harmadik" onchange="calc()"><span class="toggle-slider"></span></label>
              </div>
              <div class="check-row">
                <div><div class="check-label">Deviz√°s √©rt√©kes√≠t√©s</div></div>
                <div class="check-price">+15 000 Ft</div>
                <label class="toggle"><input type="checkbox" id="ws-deviz" onchange="calc()"><span class="toggle-slider"></span></label>
              </div>

            </div>

            <div class="divider"></div>

            <div>
              <label style="margin-bottom:12px;font-size:12px;text-transform:uppercase;letter-spacing:1px;color:var(--text-muted)">Marketplace √©rt√©kes√≠t√©s</label>
              <div class="check-row">
                <div><div class="check-label">1. marketplace platform (pl. Amazon, eMAG)</div></div>
                <div class="check-price">+20 000 Ft</div>
                <label class="toggle"><input type="checkbox" id="ws-mp1" onchange="calc()"><span class="toggle-slider"></span></label>
              </div>
              <div class="check-row">
                <div><div class="check-label">Tov√°bbi marketplace platform (darabonk√©nt)</div></div>
                <div class="check-price">+15 000 Ft/db</div>
                <div class="inline-num">
                  <input type="number" id="ws-mp2plus" min="0" value="0" onchange="calc()" style="width:60px">
                  <span style="font-size:12px;color:var(--text-muted)">db</span>
                </div>
              </div>
            </div>

          </div>
        </div>

        <!-- 4. Kedvezm√©nyek ‚Üí 2. poz√≠ci√≥ba -->
        <div class="section section-ked">
          <div class="section-header">
            <div class="section-num">2</div>
            <div class="section-title">Kedvezm√©nyek</div>
          </div>
          <div class="section-body">
            <div class="check-row">
              <div><div class="check-label">EDITH rendszerbe hat√°rid≈ëre, hi√°nytalanul felt√∂lt√©s</div></div>
              <div class="check-price">‚Äì10% alapd√≠j</div>
              <label class="toggle"><input type="checkbox" id="ws-ked1" onchange="calc()"><span class="toggle-slider"></span></label>
            </div>
            <div class="check-row">
              <div><div class="check-label">Hat√°rid≈ëben t√∂rt√©n≈ë d√≠jfizet√©s</div></div>
              <div class="check-price">‚Äì5% alapd√≠j</div>
              <label class="toggle"><input type="checkbox" id="ws-ked2" onchange="calc()"><span class="toggle-slider"></span></label>
            </div>
            <div class="divider"></div>
            <div class="egyedi-ked-block">
              <div class="two-col" style="margin-bottom:8px">
                <div class="field">
                  <label>Egyedi kedvezm√©ny ‚Äì jogc√≠m</label>
                  <input type="text" id="ws-ked-jogcim" placeholder="pl. c√©gcsoport kedvezm√©ny" oninput="updateEgyediLabel('ws'); calc()">
                </div>
                <div class="field">
                  <label>M√©rt√©ke (% az alapd√≠jb√≥l)</label>
                  <div style="position:relative">
                    <input type="number" id="ws-ked-egyedi" min="0" max="100" value="" placeholder="0" onchange="calc()" style="padding-right:32px">
                    <span style="position:absolute;right:12px;top:50%;transform:translateY(-50%);color:var(--text-muted);font-size:14px;pointer-events:none">%</span>
                  </div>
                </div>
              </div>
              <div class="hint">Szabadon megadhat√≥ kedvezm√©ny az alapd√≠j sz√°zal√©k√°ban ‚Äì pl. c√©gcsoport, hossz√∫ t√°v√∫ szerz≈ëd√©s stb.</div>
            </div>
          </div>
        </div>

        <!-- 4. B√©rsz√°mfejt√©s -->
        <div class="section">
          <div class="section-header">
            <div class="section-num">4</div>
            <div class="section-title">B√©rsz√°mfejt√©s</div>
          </div>
          <div class="section-body">
            <div class="three-col">
              <div class="field">
                <label>Egyszer≈± havib√©res (f≈ë)</label>
                <input type="number" id="ws-ber-egyszer" min="0" value="0" onchange="calc()">
                <div class="hint">1‚Äì5: 6 000 | 6‚Äì20: 5 000 | 21+: 3 500 Ft</div>
              </div>
              <div class="field">
                <label>1 letilt√°s / p√≥tl√©k (f≈ë)</label>
                <input type="number" id="ws-ber-1let" min="0" value="0" onchange="calc()">
                <div class="hint">6 000 Ft/f≈ë/h√≥</div>
              </div>
              <div class="field">
                <label>T√∂bb letilt√°s / komplex (f≈ë)</label>
                <input type="number" id="ws-ber-tobbet" min="0" value="0" onchange="calc()">
                <div class="hint">7 500 Ft/f≈ë/h√≥</div>
              </div>
            </div>
            <div class="two-col" style="margin-top:16px">
              <div class="field">
                <label>J√∂vedelem n√©lk√ºli / passz√≠v tag (f≈ë)</label>
                <input type="number" id="ws-ber-passz" min="0" value="0" onchange="calc()">
                <div class="hint">2 000 Ft/f≈ë/h√≥</div>
              </div>
              <div class="field">
                <label>B√©relt ingatlan mag√°nszem√©lyt≈ël (f≈ë)</label>
                <input type="number" id="ws-ber-ingatlan" min="0" value="0" onchange="calc()">
                <div class="hint">5 000 Ft/f≈ë/h√≥</div>
              </div>
            </div>
          </div>
        </div>

      </div><!-- /left -->

      <!-- Result panel WS -->
      <div>
        <div class="result-panel" id="ws-result">
          <div class="result-header">
            <div class="result-title">Becs√ºlt havi d√≠j</div>
            <div class="result-subtitle">Webshop ¬∑ Nett√≥ √°rak</div>
            <div id="ws-client-display" style="margin-top:8px;font-size:13px;color:var(--accent);display:none"></div>
          </div>
          <div class="result-body">

            <div class="result-section-label">Alapd√≠j</div>
            <div class="result-line"><span class="lbl">Rendel√©si volumen d√≠ja<div class="result-sub" id="ws-r-alap-sav"></div></span><span class="val" id="ws-r-alap">‚Äì</span></div>
            <div class="result-line" id="ws-r-kock-row"><span class="lbl">Forgalmi kock√°zati fel√°r<div class="result-sub" id="ws-r-kock-sav"></div></span><span class="val" id="ws-r-kock">‚Äì</span></div>

            <div class="ked-box" id="ws-r-ked-section" style="display:none">
              <div class="ked-box-header">üéÅ Kedvezm√©nyek</div>
              <div class="ked-box-body">
                <div class="result-line discount" id="ws-r-ked1-row" style="display:none"><span class="lbl">Hat√°rid≈ës felt√∂lt√©s (‚Äì10%)</span><span class="val" id="ws-r-ked1">‚Äì</span></div>
                <div class="result-line discount" id="ws-r-ked2-row" style="display:none"><span class="lbl">Hat√°rid≈ës d√≠jfizet√©s (‚Äì5%)</span><span class="val" id="ws-r-ked2">‚Äì</span></div>


                <div class="result-line discount" id="ws-r-egyedi-row" style="display:none"><span class="lbl" id="ws-r-egyedi-lbl">Egyedi kedvezm√©ny</span><span class="val" id="ws-r-egyedi">‚Äì</span></div>
              </div>
              <div class="ked-box-total">
                <span class="lbl">Kedvezm√©ny √∂sszesen</span>
                <span class="val" id="ws-r-ked-total">‚Äì</span>
              </div>
            </div>

            <div class="subtotal-ked" id="ws-r-modalap-row">
              <span class="lbl">M√≥dos√≠tott alapd√≠j</span>
              <span class="vals">
                <span class="val-orig" id="ws-r-modalap-orig" style="display:none">‚Äì</span>
                <span class="val-arrow" id="ws-r-modalap-arrow" style="display:none">‚Üí</span>
                <span class="val-new" id="ws-r-modalap">‚Äì</span>
              </span>
            </div>

            <div class="result-section-label" id="ws-r-komplex-section" style="display:none">Komplexit√°si fel√°rak</div>
            <div class="result-line" id="ws-r-bank-huf-row" style="display:none"><span class="lbl">HUF banksz√°mla fel√°r</span><span class="val" id="ws-r-bank-huf">‚Äì</span></div>
            <div class="result-line" id="ws-r-devbank-row" style="display:none"><span class="lbl">Deviz√°s banksz√°mla</span><span class="val" id="ws-r-devbank">‚Äì</span></div>
            <div class="result-line" id="ws-r-kart2-row" style="display:none"><span class="lbl">Tov√°bbi bankk√°rtya-elsz√°mol√≥</span><span class="val" id="ws-r-kart2">‚Äì</span></div>
            <div class="result-line" id="ws-r-futar-row" style="display:none"><span class="lbl">Tov√°bbi fut√°rszolg√°lat</span><span class="val" id="ws-r-futar">‚Äì</span></div>

            <div class="result-line" id="ws-r-eubesz-row" style="display:none"><span class="lbl">EU-s beszerz√©sek k√∂nyvel√©se</span><span class="val" id="ws-r-eubesz">‚Äì</span></div>
            <div class="result-line" id="ws-r-oss-row" style="display:none"><span class="lbl">EU-s √©rt√©kes√≠t√©s (OSS)</span><span class="val" id="ws-r-oss">‚Äì</span></div>
            <div class="result-line" id="ws-r-harmadik-row" style="display:none"><span class="lbl">3. orsz√°gb√≥l t√∂rt√©n≈ë beszerz√©s</span><span class="val" id="ws-r-harmadik">‚Äì</span></div>
            <div class="result-line" id="ws-r-deviz-row" style="display:none"><span class="lbl">Deviz√°s √©rt√©kes√≠t√©s</span><span class="val" id="ws-r-deviz">‚Äì</span></div>

            <div class="result-line" id="ws-r-mp1-row" style="display:none"><span class="lbl">1. marketplace platform</span><span class="val" id="ws-r-mp1">‚Äì</span></div>
            <div class="result-line" id="ws-r-mp2plus-row" style="display:none"><span class="lbl">Tov√°bbi marketplace platformok</span><span class="val" id="ws-r-mp2plus">‚Äì</span></div>

            <div class="result-section-label" id="ws-r-ber-section" style="display:none">B√©rsz√°mfejt√©s</div>
            <div class="result-line" id="ws-r-ber-egyszer-row" style="display:none"><span class="lbl">Egyszer≈± havib√©res</span><span class="val" id="ws-r-ber-egyszer">‚Äì</span></div>
            <div class="result-line" id="ws-r-ber-1let-row" style="display:none"><span class="lbl">1 letilt√°s / p√≥tl√©k</span><span class="val" id="ws-r-ber-1let">‚Äì</span></div>
            <div class="result-line" id="ws-r-ber-tobbet-row" style="display:none"><span class="lbl">T√∂bb letilt√°s / komplex</span><span class="val" id="ws-r-ber-tobbet">‚Äì</span></div>
            <div class="result-line" id="ws-r-ber-passz-row" style="display:none"><span class="lbl">Passz√≠v / j√∂vedelem n√©lk√ºli tag</span><span class="val" id="ws-r-ber-passz">‚Äì</span></div>
            <div class="result-line" id="ws-r-ber-ingatlan-row" style="display:none"><span class="lbl">B√©relt ingatlan mag√°nszem√©lyt≈ël</span><span class="val" id="ws-r-ber-ingatlan">‚Äì</span></div>

            <div class="result-total">
              <div class="total-label">Havi becs√ºlt d√≠j (nett√≥)</div>
              <div class="total-net" id="ws-total">‚Äì</div>
              <div class="total-gross" id="ws-afa-line">Brutt√≥ (27% √ÅFA): <span id="ws-total-gross">‚Äì</span></div>
            </div>

            <div class="note-box" id="ws-egyedi-note" style="display:none">
              ‚ö†Ô∏è Egyedi aj√°nlat sz√ºks√©ges ‚Äì k√©rj√ºk, vegye fel vel√ºnk a kapcsolatot!
            </div>
            <div class="eves-zar-box" id="ws-zar-box">
              <div class="eves-zar-icon">üìÖ</div>
              <div class="eves-zar-body">
                <div class="eves-zar-title">√âves z√°r√°s & k√∂zbens≈ë m√©rleg ‚Äì egyszer sz√°ml√°zva</div>
                <div class="eves-zar-text">√âves z√°r√°s: 1 havi alapd√≠j. K√∂zbens≈ë m√©rleg (ig√©ny eset√©n): szint√©n 1 havi alapd√≠j. Ezek nem szerepelnek a havi d√≠jban.</div>
                <div class="eves-zar-amount" id="ws-zar-amount">‚Äì</div>
              </div>
            </div>
            <div class="note-box" style="margin-top:10px">
              Az √°rak t√°j√©koztat√≥k, nett√≥k.
            </div>
          </div>
        </div>
      </div>
    </div>
  </div><!-- /ws tab -->

</div><!-- /container -->

<!-- Print view -->
<div id="print-view"></div>

<!-- Print button -->
<button class="print-btn" onclick="openPrintView()" title="√ñsszes√≠t≈ë nyomtat√°sa / PDF ment√©s">
  üñ®Ô∏è √ñsszes√≠t≈ë nyomtat√°sa
</button>

<script>
let wsType = 'ceg'; // 'ceg' or 'ev'

function getActiveResultId() {
  const active = document.querySelector('.tab-panel.active');
  if (!active) return null;
  if (active.id === 'tab-ev') return 'ev-result-panel';
  if (active.id === 'tab-ceg') return 'ceg-result';
  return 'ws-result';
}

function scrollToResult() {
  const id = getActiveResultId();
  const el = document.getElementById(id);
  if (el) el.scrollIntoView({ behavior: 'smooth', block: 'start' });
}

// Show/hide FAB based on whether result panel is visible
function updateFab() {
  if (window.innerWidth > 700) return;
  const id = getActiveResultId();
  const el = document.getElementById(id);
  if (!el) return;
  const rect = el.getBoundingClientRect();
  const fab = document.getElementById('fab-btn');
  // Hide FAB if result panel is fully visible
  if (rect.top >= 0 && rect.bottom <= window.innerHeight) {
    fab.classList.add('hidden');
  } else {
    fab.classList.remove('hidden');
  }
}

window.addEventListener('scroll', updateFab, { passive: true });
window.addEventListener('resize', updateFab);

function setWsType(type) {
  wsType = type;
  document.getElementById('ws-toggle-ceg').classList.toggle('active', type === 'ceg');
  document.getElementById('ws-toggle-ev').classList.toggle('active', type === 'ev');
  
  const note = document.getElementById('ws-type-note');
  const wsSubtitle = document.querySelector('#tab-ws .result-subtitle');
  const wsAfaline = document.getElementById('ws-afa-line');

  if (type === 'ev') {
    note.textContent = 'Sz√°ml√°z√°s: √°famentes (alanyi mentes)';
    note.style.color = 'var(--green)';
    if (wsSubtitle) wsSubtitle.textContent = 'Webshop ¬∑ Egy√©ni v√°llalkoz√≥ ¬∑ √Åfamentes';
    wsAfaline.innerHTML = '<span style="color:var(--green)">‚úì √Åfamentes ‚Äì alanyi ad√≥mentes sz√°ml√°z√°s</span>';
    const zarBox = document.getElementById('ws-zar-box');
    if (zarBox) zarBox.style.display = 'none';
  } else {
    note.textContent = 'Sz√°ml√°z√°s: +27% √ÅFA';
    note.style.color = 'var(--text-muted)';
    if (wsSubtitle) wsSubtitle.textContent = 'Webshop ¬∑ Gazdas√°gi t√°rsas√°g ¬∑ Nett√≥ √°rak';
    wsAfaline.innerHTML = 'Brutt√≥ (27% √ÅFA): <span id="ws-total-gross">‚Äì</span>';
    const zarBox = document.getElementById('ws-zar-box');
    if (zarBox) zarBox.style.display = '';
  }
  calc();
}

function updateEgyediLabel(prefix) {
  const jogcim = document.getElementById(prefix + '-ked-jogcim').value.trim();
  const labelEl = document.querySelector('#' + prefix + '-r-egyedi-row .lbl');
  if (labelEl) {
    labelEl.textContent = jogcim ? jogcim : 'Egyedi kedvezm√©ny';
  }
}

function updateClientName() {
  const name = document.getElementById('client-name').value.trim();
  ['ev', 'ceg', 'ws'].forEach(prefix => {
    const el = document.getElementById(prefix + '-client-display');
    if (name) {
      el.textContent = 'üìã ' + name + ' r√©sz√©re';
      el.style.display = '';
    } else {
      el.style.display = 'none';
    }
  });
}

function fmt(n) {
  return n.toLocaleString('hu-HU') + ' Ft';
}

function berCalc(egyszer, elet, tobbet, passz, ingatlan) {
  let total = 0;
  // Simple salary
  if (egyszer > 0) {
    if (egyszer <= 5) total += egyszer * 6000;
    else if (egyszer <= 20) total += 5 * 6000 + (egyszer - 5) * 5000;
    else total += 5 * 6000 + 15 * 5000 + (egyszer - 20) * 3500;
  }
  total += elet * 6000;
  total += tobbet * 5000;
  total += (passz || 0) * 2000;
  total += (ingatlan || 0) * 5000;
  return total;
}

function switchTab(t) {
  document.querySelectorAll('.tab-btn').forEach((b,i) => {
    b.classList.toggle('active', ['ev','ceg','ws'][i] === t);
  });
  document.querySelectorAll('.tab-panel').forEach(p => p.classList.remove('active'));
  document.getElementById('tab-' + t).classList.add('active');
  calc();
  setTimeout(updateFab, 50);
}

function val(id) {
  return parseFloat(document.getElementById(id).value) || 0;
}
function checked(id) {
  return document.getElementById(id).checked;
}
function sel(id) {
  return parseFloat(document.getElementById(id).value);
}

function calc() {
  calcEV();
  calcCEG();
  calcWS();
}

// helper: get selected option text for a select
function getSav(id) {
  const el = document.getElementById(id);
  if (!el) return '';
  return el.options[el.selectedIndex].text;
}
function setSav(id, text) {
  const el = document.getElementById(id);
  if (el) el.textContent = text;
}

// helper: set row visibility and value
function setRow(id, val_ft, prefix, negative) {
  const row = document.getElementById(id + '-row');
  const el = document.getElementById(id);
  if (!row || !el) return;
  const show = val_ft > 0;
  row.style.display = show ? '' : 'none';
  if (show) el.textContent = (negative ? '‚Äì' : '') + fmt(val_ft);
}
function setSection(id, show) {
  const el = document.getElementById(id);
  if (el) el.style.display = show ? '' : 'none';
}

function calcEV() {
  const alapdijBase = sel('ev-tetelek');
  const arbevFel√°r = sel('ev-arbev');
  const adozas = document.getElementById('ev-adozas').value;
  const egyedi = alapdijBase === 0 || arbevFel√°r === -1;

  document.getElementById('ev-egyedi-note').style.display = egyedi ? '' : 'none';
  if (egyedi) { document.getElementById('ev-total').textContent = 'Egyedi aj√°nlat'; return; }

  const modAlap = alapdijBase + arbevFel√°r;

  let adozasKed = 0;
  if (adozas === 'kata') adozasKed = modAlap * 0.5;
  else if (adozas === 'atalany') adozasKed = modAlap * 0.2;

  // B√©rsz√°mfejt√©s t√©telenk√©nt
  const nEgyszer = val('ev-ber-egyszer');
  const n1let    = val('ev-ber-1let');
  const nTobbet  = val('ev-ber-tobbet');
  const nPassz   = val('ev-ber-passz');
  const nIngatlan= val('ev-ber-ingatlan');
  let berEgyszer = 0;
  if (nEgyszer <= 5)       berEgyszer = nEgyszer * 6000;
  else if (nEgyszer <= 20) berEgyszer = 5*6000 + (nEgyszer-5)*5000;
  else                     berEgyszer = 5*6000 + 15*5000 + (nEgyszer-20)*3500;
  const ber1let     = n1let * 6000;
  const berTobbet   = nTobbet * 7500;
  const berPassz    = nPassz * 2000;
  const berIngatlan = nIngatlan * 5000;
  const berTotal    = berEgyszer + ber1let + berTobbet + berPassz + berIngatlan;

  // Rendszeres t√©telenk√©nt
  const rAfa      = checked('ev-afa')      ? 5000 : 0;
  const rA60      = checked('ev-a60')      ? 2000 : 0;
  const rKsh      = checked('ev-ksh')      ? 10000 : 0;
  const rCegauto  = val('ev-cegauto') * Math.round(5000/3);
  const rTurizmus = checked('ev-turizmus') ? 5000 : 0;
  const rRepr     = checked('ev-repr')     ? 10000 : 0;
  const rendTotal = rAfa + rA60 + rKsh + rCegauto + rTurizmus + rRepr;

  // Kedvezm√©nyek t√©telenk√©nt
  const ked1 = checked('ev-ked1') ? Math.round(modAlap * 0.1)  : 0;
  const ked2 = checked('ev-ked2') ? Math.round(modAlap * 0.05) : 0;
  const ked3 = checked('ev-ked3') ? Math.round(modAlap * 0.05) : 0;
  const egyediKed = Math.round(modAlap * val('ev-ked-egyedi') / 100);
  const kedTotal = ked1 + ked2 + ked3 + egyediKed;
  const mindenKed = Math.round(adozasKed) + kedTotal;  // teljes kedvezm√©ny az alapd√≠jb√≥l
  const hasKed = mindenKed > 0;

  const total = modAlap - adozasKed + berTotal + rendTotal - kedTotal;

  // Alapd√≠j
  document.getElementById('ev-r-alap').textContent = fmt(alapdijBase);
  setSav('ev-r-alap-sav', getSav('ev-tetelek'));
  const evArbevRow = document.getElementById('ev-r-arbev-row');
  if (evArbevRow) evArbevRow.style.display = arbevFel√°r > 0 ? '' : 'none';
  document.getElementById('ev-r-arbev').textContent = fmt(arbevFel√°r);
  setSav('ev-r-arbev-sav', getSav('ev-arbev'));

  // Kedvezm√©ny doboz ‚Äì ad√≥z√°si kedvezm√©ny is ide ker√ºl
  setSection('ev-r-ked-section', hasKed);
  const evAdozasRow = document.getElementById('ev-r-adozas-row');
  if (evAdozasRow) evAdozasRow.style.display = adozasKed > 0 ? '' : 'none';
  if (adozasKed > 0) {
    document.getElementById('ev-r-adozas-lbl').textContent = adozas === 'kata' ? 'KATA kedvezm√©ny (‚Äì50%)' : '√Åtal√°nyad√≥z√°s (‚Äì20%)';
    document.getElementById('ev-r-adozas').textContent = '‚Äì' + fmt(Math.round(adozasKed));
  }
  setRow('ev-r-ked1',   ked1,      'ev', true);
  setRow('ev-r-ked2',   ked2,      'ev', true);
  setRow('ev-r-ked3',   ked3,      'ev', true);
  setRow('ev-r-egyedi', egyediKed, 'ev', true);
  if (hasKed) {
    document.getElementById('ev-r-ked-total').textContent = '‚Äì' + fmt(mindenKed);
  }
  if (egyediKed > 0) {
    const jogcim = document.getElementById('ev-ked-jogcim').value.trim();
    document.getElementById('ev-r-egyedi-lbl').textContent = jogcim || 'Egyedi kedvezm√©ny';
  }

  // M√≥dos√≠tott alapd√≠j ‚Äì √°th√∫zott: teljes modAlap, √∫j: modAlap ‚Äì minden kedvezm√©ny
  document.getElementById('ev-r-modalap').textContent = fmt(modAlap - mindenKed);
  const evOrigEl = document.getElementById('ev-r-modalap-orig');
  const evArr = document.getElementById('ev-r-modalap-arrow');
  if (hasKed) {
    evOrigEl.textContent = fmt(modAlap);
    evOrigEl.style.display = '';
    if (evArr) evArr.style.display = '';
  } else {
    evOrigEl.style.display = 'none';
    if (evArr) evArr.style.display = 'none';
  }

  // B√©rsz√°mfejt√©s
  setSection('ev-r-ber-section', berTotal > 0);
  setRow('ev-r-ber-egyszer', berEgyszer, 'ev');
  setRow('ev-r-ber-1let',    ber1let,    'ev');
  setRow('ev-r-ber-tobbet',  berTobbet,  'ev');
  setRow('ev-r-ber-passz',   berPassz,   'ev');
  setRow('ev-r-ber-ingatlan',berIngatlan,'ev');

  // Rendszeres
  setSection('ev-r-rend-section', rendTotal > 0);
  setRow('ev-r-afa',     rAfa,     'ev');
  setRow('ev-r-a60',     rA60,     'ev');
  setRow('ev-r-ksh',     rKsh,     'ev');
  setRow('ev-r-cegauto', rCegauto, 'ev');
  setRow('ev-r-turizmus',rTurizmus,'ev');
  setRow('ev-r-repr',    rRepr,    'ev');

  document.getElementById('ev-total').textContent = fmt(Math.round(total));
}

function calcCEG() {
  const alapdijBase = sel('ceg-tetelek');
  const arbevFel√°r = sel('ceg-arbev');
  const egyedi = alapdijBase === 0 || arbevFel√°r === -1;

  document.getElementById('ceg-egyedi-note').style.display = egyedi ? '' : 'none';
  if (egyedi) {
    document.getElementById('ceg-total').textContent = 'Egyedi aj√°nlat';
    document.getElementById('ceg-total-gross').textContent = '‚Äì';
    return;
  }

  const modAlap = alapdijBase + arbevFel√°r;

  // B√©rsz√°mfejt√©s t√©telenk√©nt
  const nEgyszer = val('ceg-ber-egyszer');
  const n1let    = val('ceg-ber-1let');
  const nTobbet  = val('ceg-ber-tobbet');
  const nPassz   = val('ceg-ber-passz');
  const nIngatlan= val('ceg-ber-ingatlan');
  let berEgyszer = 0;
  if (nEgyszer <= 5)       berEgyszer = nEgyszer * 6000;
  else if (nEgyszer <= 20) berEgyszer = 5*6000 + (nEgyszer-5)*5000;
  else                     berEgyszer = 5*6000 + 15*5000 + (nEgyszer-20)*3500;
  const ber1let     = n1let * 6000;
  const berTobbet   = nTobbet * 7500;
  const berPassz    = nPassz * 2000;
  const berIngatlan = nIngatlan * 5000;
  const berTotal    = berEgyszer + ber1let + berTobbet + berPassz + berIngatlan;

  // Rendszeres t√©telenk√©nt
  const rAfa      = checked('ceg-afa')      ? 5000 : 0;
  const rA60      = checked('ceg-a60')      ? 2000 : 0;
  const rKiva     = checked('ceg-kiva')     ? Math.round(5000/3) : 0;
  const rKsh      = checked('ceg-ksh')      ? 10000 : 0;
  const rCegauto  = val('ceg-cegauto') * Math.round(5000/3);
  const rTurizmus = checked('ceg-turizmus') ? 5000 : 0;
  const rRepr     = checked('ceg-repr')     ? 10000 : 0;
  const rendTotal = rAfa + rA60 + rKiva + rKsh + rCegauto + rTurizmus + rRepr;

  // Kedvezm√©nyek t√©telenk√©nt
  const ked1 = checked('ceg-ked1') ? Math.round(modAlap * 0.1)  : 0;
  const ked2 = checked('ceg-ked2') ? Math.round(modAlap * 0.05) : 0;
  const egyediKed = Math.round(modAlap * val('ceg-ked-egyedi') / 100);
  const kedTotal = ked1 + ked2 + egyediKed;

  const total = modAlap + berTotal + rendTotal - kedTotal;

  // Alapd√≠j
  document.getElementById('ceg-r-alap').textContent = fmt(alapdijBase);
  setSav('ceg-r-alap-sav', getSav('ceg-tetelek'));
  const cegArbevRow = document.getElementById('ceg-r-arbev-row');
  if (cegArbevRow) cegArbevRow.style.display = arbevFel√°r > 0 ? '' : 'none';
  document.getElementById('ceg-r-arbev').textContent = fmt(arbevFel√°r);
  setSav('ceg-r-arbev-sav', getSav('ceg-arbev'));

  // Kedvezm√©ny doboz
  setSection('ceg-r-ked-section', kedTotal > 0);
  setRow('ceg-r-ked1',   ked1,      'ceg', true);
  setRow('ceg-r-ked2',   ked2,      'ceg', true);
  setRow('ceg-r-egyedi', egyediKed, 'ceg', true);
  if (kedTotal > 0) {
    document.getElementById('ceg-r-ked-total').textContent = '‚Äì' + fmt(kedTotal);
  }
  if (egyediKed > 0) {
    const jogcim = document.getElementById('ceg-ked-jogcim').value.trim();
    document.getElementById('ceg-r-egyedi-lbl').textContent = jogcim || 'Egyedi kedvezm√©ny';
  }

  // M√≥dos√≠tott alapd√≠j ‚Äì √°th√∫zott eredeti + kedvezm√©nyes
  document.getElementById('ceg-r-modalap').textContent = fmt(modAlap - kedTotal);
  const cegOrigEl = document.getElementById('ceg-r-modalap-orig');
  if (kedTotal > 0) {
    cegOrigEl.textContent = fmt(modAlap);
    cegOrigEl.style.display = '';
    const arr = document.getElementById('ceg-r-modalap-arrow');
    if (arr) arr.style.display = '';
  } else {
    cegOrigEl.style.display = 'none';
    const arr = document.getElementById('ceg-r-modalap-arrow');
    if (arr) arr.style.display = 'none';
  }

  // B√©rsz√°mfejt√©s
  setSection('ceg-r-ber-section', berTotal > 0);
  setRow('ceg-r-ber-egyszer', berEgyszer, 'ceg');
  setRow('ceg-r-ber-1let',    ber1let,    'ceg');
  setRow('ceg-r-ber-tobbet',  berTobbet,  'ceg');
  setRow('ceg-r-ber-passz',   berPassz,   'ceg');
  setRow('ceg-r-ber-ingatlan',berIngatlan,'ceg');

  // Rendszeres
  setSection('ceg-r-rend-section', rendTotal > 0);
  setRow('ceg-r-afa',     rAfa,     'ceg');
  setRow('ceg-r-a60',     rA60,     'ceg');
  setRow('ceg-r-kiva',    rKiva,    'ceg');
  setRow('ceg-r-ksh',     rKsh,     'ceg');
  setRow('ceg-r-cegauto', rCegauto, 'ceg');
  setRow('ceg-r-turizmus',rTurizmus,'ceg');
  setRow('ceg-r-repr',    rRepr,    'ceg');

  document.getElementById('ceg-total').textContent = fmt(Math.round(total));
  document.getElementById('ceg-total-gross').textContent = fmt(Math.round(total * 1.27));

  // √âves z√°r√°s figyelmeztet√©s
  const cegZarEl = document.getElementById('ceg-zar-amount');
  if (cegZarEl) cegZarEl.textContent = 'Becs√ºlt √©ves z√°r√°s d√≠ja: ' + fmt(Math.round(modAlap)) + ' Ft (k√∂nyvvizsg√°lattal: ' + fmt(Math.round(modAlap * 1.5)) + ' Ft)';
}

function calcWS() {
  const alapdijBase = sel('ws-rendeles');
  const kockFel√°r = sel('ws-arbev');
  const egyedi = alapdijBase === 0 || kockFel√°r === -1;

  document.getElementById('ws-egyedi-note').style.display = egyedi ? '' : 'none';
  if (egyedi) {
    document.getElementById('ws-total').textContent = 'Egyedi aj√°nlat';
    const g = document.getElementById('ws-total-gross'); if (g) g.textContent = '‚Äì';
    return;
  }

  // Komplexit√°s t√©telenk√©nt
  const nBankHuf  = val('ws-bank-huf');
  const kBankHuf  = Math.max(0, nBankHuf - 1) * 10000;  // els≈ë ingyenes
  const kDevbank  = val('ws-devbank')    * 15000;
  const kKart2    = checked('ws-kart2')   ? 15000 : 0;
  const kFutar    = val('ws-futar')      * 10000;

  const kEubesz   = checked('ws-eubesz') ? 15000 : 0;
  const kOss      = checked('ws-oss')    ? 25000 : 0;
  const kHarmadik = checked('ws-harmadik')? 20000 : 0;
  const kDeviz    = checked('ws-deviz')  ? 15000 : 0;

  const kMp1      = checked('ws-mp1')    ? 20000 : 0;
  const kMp2p     = val('ws-mp2plus')    * 15000;
  const komplexTotal = kBankHuf+kDevbank+kKart2+kFutar+kEubesz+kOss+kHarmadik+kDeviz+kMp1+kMp2p;

  const modAlap = alapdijBase + kockFel√°r + komplexTotal;

  // B√©rsz√°mfejt√©s t√©telenk√©nt
  const nEgyszer = val('ws-ber-egyszer');
  const n1let    = val('ws-ber-1let');
  const nTobbet  = val('ws-ber-tobbet');
  const nPassz   = val('ws-ber-passz');
  const nIngatlan= val('ws-ber-ingatlan');
  let berEgyszer = 0;
  if (nEgyszer <= 5)       berEgyszer = nEgyszer * 6000;
  else if (nEgyszer <= 20) berEgyszer = 5*6000 + (nEgyszer-5)*5000;
  else                     berEgyszer = 5*6000 + 15*5000 + (nEgyszer-20)*3500;
  const ber1let    = n1let * 6000;
  const berTobbet  = nTobbet * 7500;
  const berPassz   = nPassz * 2000;
  const berIngatlan= nIngatlan * 5000;
  const berTotal   = berEgyszer + ber1let + berTobbet + berPassz + berIngatlan;

  // Kedvezm√©nyek t√©telenk√©nt
  const ked1 = checked('ws-ked1') ? Math.round(modAlap * 0.1)  : 0;
  const ked2 = checked('ws-ked2') ? Math.round(modAlap * 0.05) : 0;
  const egyediKed = Math.round(modAlap * val('ws-ked-egyedi') / 100);
  const kedTotal  = ked1 + ked2 + egyediKed;

  const total = modAlap + berTotal - kedTotal;

  // Alapd√≠j
  document.getElementById('ws-r-alap').textContent = fmt(alapdijBase);
  setSav('ws-r-alap-sav', getSav('ws-rendeles'));
  const wsKockRow = document.getElementById('ws-r-kock-row');
  if (wsKockRow) wsKockRow.style.display = kockFel√°r > 0 ? '' : 'none';
  document.getElementById('ws-r-kock').textContent = fmt(kockFel√°r);
  setSav('ws-r-kock-sav', getSav('ws-arbev'));

  // Kedvezm√©ny doboz
  setSection('ws-r-ked-section', kedTotal > 0);
  setRow('ws-r-ked1',    ked1,      'ws', true);
  setRow('ws-r-ked2',    ked2,      'ws', true);
  setRow('ws-r-egyedi',  egyediKed, 'ws', true);
  if (kedTotal > 0) {
    document.getElementById('ws-r-ked-total').textContent = '‚Äì' + fmt(kedTotal);
  }
  if (egyediKed > 0) {
    const jogcim = document.getElementById('ws-ked-jogcim').value.trim();
    document.getElementById('ws-r-egyedi-lbl').textContent = jogcim || 'Egyedi kedvezm√©ny';
  }

  // M√≥dos√≠tott alapd√≠j ‚Äì √°th√∫zott eredeti + kedvezm√©nyes
  document.getElementById('ws-r-modalap').textContent = fmt(modAlap - kedTotal);
  const wsOrigEl = document.getElementById('ws-r-modalap-orig');
  if (kedTotal > 0) {
    wsOrigEl.textContent = fmt(modAlap);
    wsOrigEl.style.display = '';
    const arr = document.getElementById('ws-r-modalap-arrow');
    if (arr) arr.style.display = '';
  } else {
    wsOrigEl.style.display = 'none';
    const arr = document.getElementById('ws-r-modalap-arrow');
    if (arr) arr.style.display = 'none';
  }

  // Komplexit√°s
  setSection('ws-r-komplex-section', komplexTotal > 0);
  setRow('ws-r-bank-huf',  kBankHuf,  'ws');
  if (kBankHuf > 0) {
    const lbl = document.querySelector('#ws-r-bank-huf-row .lbl');
    if (lbl) lbl.textContent = 'HUF banksz√°mla fel√°r (' + (nBankHuf - 1) + ' db √ó 10 000 Ft)';
  }
  setRow('ws-r-devbank',  kDevbank,  'ws');
  setRow('ws-r-kart2',    kKart2,    'ws');
  setRow('ws-r-futar',    kFutar,    'ws');

  setRow('ws-r-eubesz',   kEubesz,   'ws');
  setRow('ws-r-oss',      kOss,      'ws');
  setRow('ws-r-harmadik', kHarmadik, 'ws');
  setRow('ws-r-deviz',    kDeviz,    'ws');

  setRow('ws-r-mp1',      kMp1,      'ws');
  setRow('ws-r-mp2plus',  kMp2p,     'ws');

  // B√©rsz√°mfejt√©s
  setSection('ws-r-ber-section', berTotal > 0);
  setRow('ws-r-ber-egyszer', berEgyszer, 'ws');
  setRow('ws-r-ber-1let',    ber1let,    'ws');
  setRow('ws-r-ber-tobbet',  berTobbet,  'ws');
  setRow('ws-r-ber-passz',   berPassz,   'ws');
  setRow('ws-r-ber-ingatlan',berIngatlan,'ws');

  document.getElementById('ws-total').textContent = fmt(Math.round(total));
  const wsAfaline = document.getElementById('ws-afa-line');
  const grossEl = document.getElementById('ws-total-gross');
  if (wsType === 'ceg') {
    if (wsAfaline) wsAfaline.style.display = '';
    if (grossEl) grossEl.textContent = fmt(Math.round(total * 1.27));
  } else {
    if (wsAfaline) wsAfaline.innerHTML = '‚úì √Åfamentes ‚Äì alanyi ad√≥mentes sz√°ml√°z√°s';
    if (wsAfaline) wsAfaline.style.color = 'var(--green)';
  }

  // √âves z√°r√°s figyelmeztet√©s
  const wsZarEl = document.getElementById('ws-zar-amount');
  if (wsZarEl) wsZarEl.textContent = 'Becs√ºlt √©ves z√°r√°s d√≠ja: ' + fmt(Math.round(modAlap)) + ' Ft' + (wsType === 'ceg' ? ' (+ √ÅFA)' : '') + ' ¬∑ K√∂zbens≈ë m√©rleg ig√©ny eset√©n: ugyanennyi';
}

// ==================== PRINT VIEW ====================
function openPrintView() {
  const activeTab = document.querySelector('.tab-panel.active').id;
  const prefix = activeTab === 'tab-ev' ? 'ev' : activeTab === 'tab-ceg' ? 'ceg' : 'ws';

  // Collect visible result lines
  function getLines(sectionLabelId, rowPrefix) {
    // gets all visible result-line rows from result body
  }

  // Gather data from result panel
  const resultPanel = document.getElementById(
    prefix === 'ev' ? 'ev-result-panel' : prefix === 'ceg' ? 'ceg-result' : 'ws-result'
  );

  const clientName = document.getElementById('client-name').value.trim();
  const today = new Date().toLocaleDateString('hu-HU', { year: 'numeric', month: 'long', day: 'numeric' });

  // Subtitle
  const subtitle = resultPanel.querySelector('.result-subtitle').textContent;

  // Collect all visible result lines from the panel
  const allLines = resultPanel.querySelectorAll('.result-section-label, .result-line, .subtotal-ked, .ked-box, .total-area, .eves-zar-box');

  let itemsHTML = '';

  allLines.forEach(el => {
    if (el.style.display === 'none') return;

    if (el.classList.contains('result-section-label')) {
      itemsHTML += `<div class="print-section-label">${el.textContent}</div>`;

    } else if (el.classList.contains('ked-box')) {
      // Green discount box
      const rows = el.querySelectorAll('.result-line[style*="display: none"], .result-line:not([style])');
      let kedRows = '';
      el.querySelectorAll('.result-line').forEach(row => {
        if (row.style.display === 'none') return;
        const lbl = row.querySelector('.lbl') ? row.querySelector('.lbl').textContent : '';
        const val = row.querySelector('.val') ? row.querySelector('.val').textContent : '';
        kedRows += `<div class="print-line"><span class="lbl">${lbl}</span><span class="val discount">${val}</span></div>`;
      });
      const totalEl = el.querySelector('.ked-box-total');
      const totalVal = totalEl ? totalEl.querySelector('.val').textContent : '';
      itemsHTML += `<div class="print-ked-box">
        ${kedRows}
        <div class="print-ked-total"><span>Kedvezm√©ny √∂sszesen</span><span>${totalVal}</span></div>
      </div>`;

    } else if (el.classList.contains('subtotal-ked')) {
      const lbl = 'M√≥dos√≠tott alapd√≠j';
      const origEl = el.querySelector('.val-orig');
      const newEl = el.querySelector('.val-new');
      const hasOrig = origEl && origEl.style.display !== 'none';
      const valsHTML = hasOrig
        ? `<span class="vals"><span class="orig">${origEl.textContent}</span><span class="arrow"> ‚Üí </span><span class="new">${newEl.textContent}</span></span>`
        : `<span class="vals"><span class="new">${newEl.textContent}</span></span>`;
      itemsHTML += `<div class="print-modalap"><span>${lbl}</span>${valsHTML}</div>`;

    } else if (el.classList.contains('result-line')) {
      if (el.style.display === 'none') return;
      const lblEl = el.querySelector('.lbl');
      const valEl = el.querySelector('.val, .val-new');
      if (!lblEl || !valEl) return;
      const subEl = lblEl.querySelector('.result-sub');
      const subText = subEl ? subEl.textContent : '';
      const lblText = lblEl.childNodes[0] ? lblEl.childNodes[0].textContent.trim() : lblEl.textContent.trim();
      const isDiscount = el.classList.contains('discount');
      itemsHTML += `<div class="print-line">
        <span class="lbl">${lblText}${subText ? `<div class="sub">${subText}</div>` : ''}</span>
        <span class="val${isDiscount ? ' discount' : ''}">${valEl.textContent}</span>
      </div>`;

    } else if (el.classList.contains('eves-zar-box')) {
      if (el.style.display === 'none') return;
      const title = el.querySelector('.eves-zar-title') ? el.querySelector('.eves-zar-title').textContent : '';
      const text = el.querySelector('.eves-zar-text') ? el.querySelector('.eves-zar-text').textContent : '';
      const amount = el.querySelector('.eves-zar-amount') ? el.querySelector('.eves-zar-amount').textContent : '';
      itemsHTML += `<div class="print-zar-box">
        <div class="print-zar-title">üìÖ ${title}</div>
        <div class="print-zar-text">${text}</div>
        <div class="print-zar-amount">${amount}</div>
      </div>`;
    }
  });

  // Total
  const totalEl = resultPanel.querySelector('.total-net');
  const totalVal = totalEl ? totalEl.textContent : '‚Äì';
  const grossEl = resultPanel.querySelector('.total-gross');
  const grossHTML = grossEl && grossEl.style.display !== 'none'
    ? `<div class="gross">${grossEl.textContent}</div>` : '';

  const clientHTML = clientName
    ? `<div class="print-client">Aj√°nlatk√©r≈ë: <strong>${clientName}</strong></div>` : '';

  const html = `
    <div class="print-page">
      <div class="print-header">
        <div class="print-logo">
          <div class="print-logo-mark">S</div>
          <div class="print-logo-text">SukorAD√ì</div>
        </div>
        <div class="print-meta">
          K√∂nyvel√©si d√≠jaj√°nlat<br>
          ${today}
        </div>
      </div>

      <div class="print-title">Becs√ºlt havi k√∂nyvel√©si d√≠j</div>
      <div class="print-subtitle">${subtitle}</div>

      ${clientHTML}

      ${itemsHTML}

      <div class="print-total-box">
        <div><div class="lbl">Becs√ºlt havi d√≠j √∂sszesen</div>${grossHTML}</div>
        <div class="val">${totalVal}</div>
      </div>

      <div class="print-footer">
        Az √°rak t√°j√©koztat√≥ jelleg≈±ek, nett√≥k. A v√©gleges d√≠j az √≠r√°sos szerz≈ëd√©sben ker√ºl r√∂gz√≠t√©sre.<br>
        SukorAD√ì K√∂nyvel≈ë √©s Ad√≥tan√°csad√≥ Iroda ¬∑ sukorado.hu
      </div>
    </div>
  `;

  const printDiv = document.getElementById('print-view');
  printDiv.innerHTML = html;
  window.print();
}

// ==================== INIT ====================
calc();
setTimeout(updateFab, 100);
</script>
</body>
</html>
